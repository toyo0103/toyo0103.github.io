<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"toyo0103.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="#題目Define S &#x3D; [s,n] as the string S which consists of n connected strings s. For example, [&quot;abc&quot;, 3] &#x3D;”abcabcabc”. On the other hand, we define that string s1 can be obtained from string s2">
<meta property="og:type" content="article">
<meta property="og:title" content="【LeetCode】Count The Repetitions">
<meta property="og:url" content="https://toyo0103.github.io/2018/06/13/%E3%80%90LeetCode%E3%80%91Count%20The%20Repetitions/index.html">
<meta property="og:site_name" content="程式隨筆">
<meta property="og:description" content="#題目Define S &#x3D; [s,n] as the string S which consists of n connected strings s. For example, [&quot;abc&quot;, 3] &#x3D;”abcabcabc”. On the other hand, we define that string s1 can be obtained from string s2">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://toyo0103.github.io/images/20180611/1.jpg">
<meta property="og:image" content="https://toyo0103.github.io/images/20180611/3.jpg">
<meta property="og:image" content="https://toyo0103.github.io/images/20180611/4.jpg">
<meta property="article:published_time" content="2018-06-13T00:44:00.000Z">
<meta property="article:modified_time" content="2022-08-09T13:36:17.088Z">
<meta property="article:author" content="Toyo">
<meta property="article:tag" content="LeetCode">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://toyo0103.github.io/images/20180611/1.jpg">

<link rel="canonical" href="https://toyo0103.github.io/2018/06/13/%E3%80%90LeetCode%E3%80%91Count%20The%20Repetitions/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>【LeetCode】Count The Repetitions | 程式隨筆</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="程式隨筆" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">程式隨筆</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/06/13/%E3%80%90LeetCode%E3%80%91Count%20The%20Repetitions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【LeetCode】Count The Repetitions
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-13 00:44:00" itemprop="dateCreated datePublished" datetime="2018-06-13T00:44:00+00:00">2018-06-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 13:36:17" itemprop="dateModified" datetime="2022-08-09T13:36:17+00:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index"><span itemprop="name">LeetCode</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/06/13/%E3%80%90LeetCode%E3%80%91Count%20The%20Repetitions/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/06/13/【LeetCode】Count The Repetitions/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="題目"><a href="#題目" class="headerlink" title="#題目"></a>#題目</h1><p>Define <code>S = [s,n]</code> as the string S which consists of n connected strings s. For example, <code>[&quot;abc&quot;, 3]</code> =”abcabcabc”.</p>
<p>On the other hand, we define that string s1 can be obtained from string s2 if we can remove some characters from s2 such that it becomes s1. For example, “abc” can be obtained from “abdbec” based on our definition, but it can not be obtained from “acbbe”.</p>
<p>You are given two non-empty strings s1 and s2 (each at most 100 characters long) and two integers 0 ≤ n1 ≤ 106 and 1 ≤ n2 ≤ 106. Now consider the strings S1 and S2, where <code>S1=[s1,n1]</code> and <code>S2=[s2,n2]</code>. Find the maximum integer M such that <code>[S2,M]</code> can be obtained from <code>S1</code>.</p>
<p><strong>Example:</strong></p>
<div class="note info">
            <p>Input:<br>s1=”acb”, n1=4<br>s2=”ab”, n2=2</p><p>Return:<br>2</p>
          </div>



<h1 id="解題"><a href="#解題" class="headerlink" title="#解題"></a>#解題</h1><p><strong>如何判定S2會包含在S1的倍數之中</strong>，我採取的方法是將遍歷S1的每個字元，每當該字元與S2相同時，S2的指標往前一格。</p>
<div class="note info">
            <p>[a]cb<br>S1 : <strong>a</strong><br>[a]b<br>S2 : <strong>a</strong>  </p>
          </div>

<div class="note info">
            <p>a[c]b<br>S1 : c<br>a[b]<br>S2 : b</p>
          </div>

<div class="note info">
            <p>ac[b]<br>S1 : <strong>b</strong><br>a[b]<br>S2 : <strong>b</strong></p>
          </div>

<div class="note info">
            <p>[a]cb<br>S1 : <strong>a</strong><br>[a]b<br>S2 : <strong>a</strong></p>
          </div>

<p>以下省略….</p>
<p>直到S1 * N1的字元次數被跑完時，可以知道S2被重複了幾次，這時候將重複次數<strong>除以N2</strong>即為真正可重複的次數</p>
<h2 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">TestMethod()</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GetMaxRepetitionsTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//arrange</span></span><br><span class="line">    <span class="keyword">var</span> s1 = <span class="string">&quot;acb&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> n1 = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">var</span> s2 = <span class="string">&quot;ab&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> n2 = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> sut = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> expected = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//act</span></span><br><span class="line">    <span class="keyword">var</span> actual = sut.GetMaxRepetitions(s1, n1, s2, n2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//assert</span></span><br><span class="line">    actual.Should().Be(expected);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetMaxRepetitions</span>(<span class="params"><span class="built_in">string</span> s1, <span class="built_in">int</span> n1, <span class="built_in">string</span> s2, <span class="built_in">int</span> n2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> SlChars = s1.ToCharArray();</span><br><span class="line">    <span class="keyword">var</span> S2Chars = s2.ToCharArray();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> Repetitions = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> Cursor = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; SlChars.Length * n1 ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (SlChars[i % SlChars.Length] == S2Chars[Cursor])</span><br><span class="line">        &#123;</span><br><span class="line">            Cursor++; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Cursor == S2Chars.Length)</span><br><span class="line">        &#123;</span><br><span class="line">            Repetitions++;</span><br><span class="line">            Cursor = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Repetitions / n2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="案例二"><a href="#案例二" class="headerlink" title="案例二"></a>案例二</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">TestMethod()</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GetMaxRepetitionsTest_2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//arrange</span></span><br><span class="line">    <span class="keyword">var</span> s1 = <span class="string">&quot;ab&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> n1 = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">var</span> s2 = <span class="string">&quot;ab&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> n2 = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">var</span> sut = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> expected = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//act</span></span><br><span class="line">    <span class="keyword">var</span> actual = sut.GetMaxRepetitions(s1, n1, s2, n2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//assert</span></span><br><span class="line">    actual.Should().Be(expected);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>單元測試直接通過</strong></p>
<h1 id="解析"><a href="#解析" class="headerlink" title="#解析"></a>#解析</h1><p>LeetCode回傳<strong>Time Limit Exceeded</strong>，表示這效率不能接受，所以來試試看優化它</p>
<p><img src="/images/20180611/1.jpg"></p>
<h2 id="優化"><a href="#優化" class="headerlink" title="優化"></a>優化</h2><p>想先把迴圈內計算餘數的地方拿掉，這個地方應該卡掉一堆效能</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (SlChars[i % SlChars.Length] == S2Chars[Cursor])</span><br></pre></td></tr></table></figure>

<p>改寫之後不再迴圈內計算餘數，讓每個變數的操作都盡量簡單化</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetMaxRepetitions</span>(<span class="params"><span class="built_in">string</span> s1, <span class="built_in">int</span> n1, <span class="built_in">string</span> s2, <span class="built_in">int</span> n2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> SlChars = s1.ToCharArray();</span><br><span class="line">    <span class="keyword">var</span> S2Chars = s2.ToCharArray();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> Repetitions = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> S1Cursor = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> S2Cursor = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> Count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (Count &lt; n1)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (SlChars[S1Cursor] == S2Chars[S2Cursor])</span><br><span class="line">        &#123;</span><br><span class="line">            S2Cursor++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        S1Cursor++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (S2Cursor == S2Chars.Length)</span><br><span class="line">        &#123;</span><br><span class="line">            Repetitions++;</span><br><span class="line">            S2Cursor = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (S1Cursor == SlChars.Length)</span><br><span class="line">        &#123;</span><br><span class="line">            S1Cursor = <span class="number">0</span>;</span><br><span class="line">            Count++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Repetitions / n2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>結果LeetCode還是判定逾時,果然事情不是憨人我想的那麼簡單，暴力破解法行不通</p>
<p><img src="/images/20180611/3.jpg" alt="/images/20180611/3.jpg"></p>
<h2 id="尋找Loop-Pattern"><a href="#尋找Loop-Pattern" class="headerlink" title="尋找Loop Pattern"></a>尋找Loop Pattern</h2><p>在這邊決定改變作法，首先如果S1會重複表示有可能發生重複狀況的發生，例如</p>
<p>S1 = aabaabaab<br>n1 = 3</p>
<p>S2 = aba<br>n2 = 1</p>
<table>
<thead>
<tr>
<th>0</th>
<th></th>
<th></th>
<th></th>
<th>4</th>
<th></th>
<th></th>
<th>7</th>
<th></th>
<th></th>
<th>1</th>
<th></th>
<th></th>
<th>4</th>
<th></th>
<th></th>
<th>7</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>a</strong></td>
<td>a</td>
<td>b</td>
<td>a</td>
<td>a</td>
<td>b</td>
<td>a</td>
<td>a</td>
<td>b</td>
<td><strong>a</strong></td>
<td>a</td>
<td>b</td>
<td>a</td>
<td>a</td>
<td>b</td>
<td>a</td>
<td>a</td>
<td>b</td>
<td><strong>a</strong></td>
<td>…..</td>
</tr>
<tr>
<td><strong>a</strong></td>
<td></td>
<td>b</td>
<td>a</td>
<td><strong>a</strong></td>
<td>b</td>
<td>a</td>
<td><strong>a</strong></td>
<td>b</td>
<td>a</td>
<td><strong>a</strong></td>
<td>b</td>
<td>a</td>
<td><strong>a</strong></td>
<td>b</td>
<td>a</td>
<td><strong>a</strong></td>
<td>b</td>
<td>a</td>
<td>…..</td>
</tr>
</tbody></table>
<p>*第一列表示S2字首a比對到時，相對於各組S1的Index</p>
<p>*第二列 S1的排序組</p>
<p>*第三列 S2比對相符組</p>
<p>可以發現第一次重複的Index為4，所以繼續往下排就會一直重複的狀況發生，也藉著這個特性可以找出一個算法。</p>
<ul>
<li>第二次4在整個S1的排列組裡面Index為<strong>13</strong>，第一次4在整個排列組裡面Index也是<strong>4</strong></li>
<li>兩者之間總共可以包含3組S2</li>
<li>所以之後只要每加9個字元，就會多出3組S2</li>
</ul>
<p>依照此特性修改程式</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetMaxRepetitions</span>(<span class="params"><span class="built_in">string</span> s1, <span class="built_in">int</span> n1, <span class="built_in">string</span> s2, <span class="built_in">int</span> n2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> S1Chars = s1.ToCharArray();</span><br><span class="line">    <span class="keyword">var</span> S2Chars = s2.ToCharArray();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> S2Cursor = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> Repetitions = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> LogFirstLetterMatchInS1Index = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">int</span>, Tuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; S1Chars.Length * n1 ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> S1Index = i % s1.Length;</span><br><span class="line">        <span class="keyword">if</span> (S1Chars[S1Index] == S2Chars[S2Cursor])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (S2Cursor == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (LogFirstLetterMatchInS1Index.ContainsKey(S1Index))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//形成Loop了</span></span><br><span class="line">                    <span class="keyword">var</span> PreSameIndexValue = LogFirstLetterMatchInS1Index[S1Index];</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//Repetitions</span></span><br><span class="line">                    <span class="keyword">var</span> OneLoopS2Count = (Repetitions - PreSameIndexValue.Item2);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">var</span> OneLoopDistance = i - PreSameIndexValue.Item1;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">while</span> ((i + OneLoopDistance) &lt; S1Chars.Length * n1)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Repetitions += OneLoopS2Count;</span><br><span class="line"></span><br><span class="line">                        i += OneLoopDistance;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    LogFirstLetterMatchInS1Index.Add(S1Index,<span class="keyword">new</span> Tuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt;(i, Repetitions));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            S2Cursor++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (S2Cursor == S2Chars.Length)</span><br><span class="line">        &#123;</span><br><span class="line">            Repetitions++;</span><br><span class="line"></span><br><span class="line">            S2Cursor = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Repetitions / n2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/20180611/4.jpg"></p>
<p>雖然終於通過LeetCode測驗，但成績依然不是很理想，不過一些大神的解法目前還沒完全了解，所以先用這個算法勉強過關，之後有懂更佳的方式再繼續優化。</p>
<p>這題寫了兩天且數次拿著計算紙在床上睡著後終於勉強想通，不愧是Hard等級的題目阿</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/LeetCode/" rel="tag"># LeetCode</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/06/09/%E3%80%90LeetCode%E3%80%91Serialize%20and%20Deserialize%20BST/" rel="prev" title="【LeetCode】Serialize and Deserialize BST">
      <i class="fa fa-chevron-left"></i> 【LeetCode】Serialize and Deserialize BST
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/06/19/%E3%80%90LeetCode%E3%80%91Poor%20Pigs/" rel="next" title="【LeetCode】Poor Pigs">
      【LeetCode】Poor Pigs <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%8C%E7%9B%AE"><span class="nav-number">1.</span> <span class="nav-text">#題目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A3%E9%A1%8C"><span class="nav-number">2.</span> <span class="nav-text">#解題</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80"><span class="nav-number">2.1.</span> <span class="nav-text">案例一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E4%BA%8C"><span class="nav-number">2.2.</span> <span class="nav-text">案例二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">#解析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%84%AA%E5%8C%96"><span class="nav-number">3.1.</span> <span class="nav-text">優化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8B%E6%89%BELoop-Pattern"><span class="nav-number">3.2.</span> <span class="nav-text">尋找Loop Pattern</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Toyo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">202</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">74</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Toyo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://toyo0103.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://toyo0103.github.io/2018/06/13/%E3%80%90LeetCode%E3%80%91Count%20The%20Repetitions/";
    this.page.identifier = "2018/06/13/【LeetCode】Count The Repetitions/";
    this.page.title = "【LeetCode】Count The Repetitions";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://toyo0103.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
