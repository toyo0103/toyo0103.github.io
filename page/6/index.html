<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"toyo0103.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="程式隨筆">
<meta property="og:url" content="https://toyo0103.github.io/page/6/index.html">
<meta property="og:site_name" content="程式隨筆">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Toyo">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://toyo0103.github.io/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>程式隨筆</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="程式隨筆" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">程式隨筆</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/06/05/%E3%80%90LeetCode%E3%80%91Add%20Two%20Numbers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/05/%E3%80%90LeetCode%E3%80%91Add%20Two%20Numbers/" class="post-title-link" itemprop="url">【LeetCode】Add Two Numbers</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-05 21:10:00" itemprop="dateCreated datePublished" datetime="2018-06-05T21:10:00+08:00">2018-06-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index"><span itemprop="name">LeetCode</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/06/05/%E3%80%90LeetCode%E3%80%91Add%20Two%20Numbers/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/06/05/【LeetCode】Add Two Numbers/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>有感於自己是個廢物工程師，開了LeetCode帳號好幾個月一題都還沒刷，所以決定寫一系列紀錄自己刷LeetCode的過程跟解題方法，希望幾年後回頭能看見自己的進步，廢話不多說直接進入題目。</p>
<h1 id="題目"><a href="#題目" class="headerlink" title="#題目"></a>#題目</h1><p>You are given two <strong>non-empty</strong> linked lists representing two non-negative integers. The digits are stored in <strong>reverse order</strong> and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p>
<p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
<p><strong>Example</strong> </p>
<div class="note info">
            <p>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8<br>Explanation: 342 + 465 = 807</p>
          </div>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     public int val;</span></span><br><span class="line"><span class="comment"> *     public ListNode next;</span></span><br><span class="line"><span class="comment"> *     public ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">AddTwoNumbers</span>(<span class="params">ListNode l1, ListNode l2</span>)</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="解題"><a href="#解題" class="headerlink" title="#解題"></a>#解題</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> ListNode <span class="title">AddTwoNumbers</span>(<span class="params">ListNode l1, ListNode l2</span>)</span></span><br><span class="line"><span class="function"></span>       &#123;</span><br><span class="line">           ListNode Result = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">           ListNode CN1 = l1;</span><br><span class="line">           ListNode CN2 = l2;</span><br><span class="line"></span><br><span class="line">           ListNode RCN = Result;</span><br><span class="line">           <span class="built_in">bool</span> Flag = <span class="literal">true</span>;</span><br><span class="line">           <span class="keyword">while</span> (Flag)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">var</span> Sum = RCN.val +  GetNodeValue(CN1) + GetNodeValue(CN2);</span><br><span class="line"></span><br><span class="line">               RCN.val = Sum % <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">if</span> (Sum &gt; <span class="number">9</span>)</span><br><span class="line">                   RCN.next = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">               CN1 = CN1 == <span class="literal">null</span> ? <span class="literal">null</span> : CN1.next;</span><br><span class="line">               CN2 = CN2 == <span class="literal">null</span> ? <span class="literal">null</span> : CN2.next;</span><br><span class="line">               </span><br><span class="line"></span><br><span class="line">               Flag = (CN1 != <span class="literal">null</span> || CN2 != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">               <span class="keyword">if</span> (Flag &amp;&amp; RCN.next == <span class="literal">null</span>)</span><br><span class="line">                   RCN.next = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">               RCN = RCN.next;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">return</span> Result;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">private</span> <span class="built_in">int</span> <span class="title">GetNodeValue</span>(<span class="params">ListNode node</span>)</span></span><br><span class="line"><span class="function"></span>       &#123;</span><br><span class="line">           <span class="keyword">return</span> node == <span class="literal">null</span> ?  <span class="number">0</span> : node.val;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h2 id="Unit-Testing"><a href="#Unit-Testing" class="headerlink" title="Unit Testing"></a>Unit Testing</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">TestClass</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SolutionTests</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">TestMethod</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> AddTwoNumbersTest_輸入L1為<span class="number">342</span>_L2為<span class="number">456</span>_應得到<span class="number">807</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//arrange</span></span><br><span class="line">        <span class="keyword">var</span> l1 = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br><span class="line">        l1.next = <span class="keyword">new</span> ListNode(<span class="number">4</span>);</span><br><span class="line">        l1.next.next = <span class="keyword">new</span> ListNode(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> l2 = <span class="keyword">new</span> ListNode(<span class="number">5</span>);</span><br><span class="line">        l2.next = <span class="keyword">new</span> ListNode(<span class="number">6</span>);</span><br><span class="line">        l2.next.next = <span class="keyword">new</span> ListNode(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> sut = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> expected = <span class="keyword">new</span> ListNode(<span class="number">7</span>);</span><br><span class="line">        expected.next = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        expected.next.next = <span class="keyword">new</span> ListNode(<span class="number">8</span>);</span><br><span class="line">        <span class="comment">//act</span></span><br><span class="line">        <span class="keyword">var</span> actual = sut.AddTwoNumbers(l1,l2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//assert</span></span><br><span class="line">        actual.Should().BeEquivalentTo(expected);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">TestMethod</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> AddTwoNumbersTest_輸入L1為<span class="number">42</span>_L2為<span class="number">708</span>_應得到<span class="number">750</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//arrange</span></span><br><span class="line">        <span class="keyword">var</span> l1 = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br><span class="line">        l1.next = <span class="keyword">new</span> ListNode(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> l2 = <span class="keyword">new</span> ListNode(<span class="number">8</span>);</span><br><span class="line">        l2.next = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        l2.next.next = <span class="keyword">new</span> ListNode(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> sut = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> expected = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        expected.next = <span class="keyword">new</span> ListNode(<span class="number">5</span>);</span><br><span class="line">        expected.next.next = <span class="keyword">new</span> ListNode(<span class="number">7</span>);</span><br><span class="line">        <span class="comment">//act</span></span><br><span class="line">        <span class="keyword">var</span> actual = sut.AddTwoNumbers(l1, l2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//assert</span></span><br><span class="line">        actual.Should().BeEquivalentTo(expected);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">TestMethod</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> AddTwoNumbersTest_輸入L1為<span class="number">1</span>_L2為<span class="number">99</span>_應得到<span class="number">100</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//arrange</span></span><br><span class="line">        <span class="keyword">var</span> l1 = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> l2 = <span class="keyword">new</span> ListNode(<span class="number">9</span>);</span><br><span class="line">        l2.next = <span class="keyword">new</span> ListNode(<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> sut = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> expected = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        expected.next = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        expected.next.next = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//act</span></span><br><span class="line">        <span class="keyword">var</span> actual = sut.AddTwoNumbers(l1, l2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//assert</span></span><br><span class="line">        actual.Should().BeEquivalentTo(expected);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="分析結果"><a href="#分析結果" class="headerlink" title="#分析結果"></a>#分析結果</h1><p>雖然過了但是效率不佳，執行完LeetCode全部的測試總共花費 <strong>176 ms</strong>只贏過38.84%的提交範例，所以試試看優化它</p>
<p><img src="/images/20180615/leetcode/1.jpg" alt="/images/20180615/leetcode/1.jpg"></p>
<h2 id="移除三元運算子"><a href="#移除三元運算子" class="headerlink" title="移除三元運算子"></a>移除三元運算子</h2><p>基本上三元運算子比較耗效能，所以優先改進它</p>
<p><strong>原本</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">int</span> <span class="title">GetNodeValue</span>(<span class="params">ListNode node</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> node == <span class="literal">null</span> ?  <span class="number">0</span> : node.val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>修改後</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">int</span> <span class="title">GetNodeValue</span>(<span class="params">ListNode node</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node.val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>原本</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CN1 = CN1 == <span class="literal">null</span> ? <span class="literal">null</span> : CN1.next;</span><br><span class="line">CN2 = CN2 == <span class="literal">null</span> ? <span class="literal">null</span> : CN2.next;</span><br></pre></td></tr></table></figure>



<p><strong>修改後</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Node1Cursor != <span class="literal">null</span>)</span><br><span class="line">    Node1Cursor = Node1Cursor.next;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Node2Cursor != <span class="literal">null</span>)</span><br><span class="line">    Node2Cursor = Node2Cursor.next;</span><br></pre></td></tr></table></figure>



<p><strong>測試結果</strong></p>
<p><img src="/images/20180615/leetcode/2.jpg" alt="/images/20180615/leetcode/2.jpg"></p>
<p>簡直是三元運算子定生死….</p>
<h2 id="優化可讀性"><a href="#優化可讀性" class="headerlink" title="優化可讀性"></a>優化可讀性</h2><blockquote class="blockquote-center">
            <i class="fa fa-quote-left"></i>
            <p>乾淨的程式碼，閱讀起來應該像是幾何證明般</p>
<p>Uncle Bob</p>

            <i class="fa fa-quote-right"></i>
          </blockquote>

<p>所以試著讓變數命名更貼近意義一點</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">AddTwoNumbers</span>(<span class="params">ListNode l1, ListNode l2</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        ListNode Result = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        ListNode Node1Cursor = l1;</span><br><span class="line">        ListNode Node2Cursor = l2;</span><br><span class="line"></span><br><span class="line">        ListNode Head = Result;</span><br><span class="line">        <span class="built_in">bool</span> NeedNextRun = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (NeedNextRun)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> Sum = Head.val + GetNodeValue(Node1Cursor) + GetNodeValue(Node2Cursor);</span><br><span class="line"></span><br><span class="line">            Head.val = Sum % <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Sum &gt; <span class="number">9</span>)</span><br><span class="line">                Head.next = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Node1Cursor != <span class="literal">null</span>)</span><br><span class="line">                Node1Cursor = Node1Cursor.next;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Node2Cursor != <span class="literal">null</span>)</span><br><span class="line">                Node2Cursor = Node2Cursor.next;</span><br><span class="line"></span><br><span class="line">            NeedNextRun = (Node1Cursor != <span class="literal">null</span> || Node2Cursor != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (NeedNextRun &amp;&amp; Head.next == <span class="literal">null</span>)</span><br><span class="line">                Head.next = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">            Head = Head.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">int</span> <span class="title">GetNodeValue</span>(<span class="params">ListNode node</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>也因為有寫單元測試的關係，上述的調整過程中都沒讓程式壞掉，最後希望藉由這樣的練習能讓自己TDD與重構的技巧再更純熟一些</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/06/05/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%917.%E9%A9%97%E8%AD%89%E5%8F%83%E6%95%B8-DataAnnotations%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/05/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%917.%E9%A9%97%E8%AD%89%E5%8F%83%E6%95%B8-DataAnnotations%20/" class="post-title-link" itemprop="url">【MVC教學】7.驗證參數-DataAnnotations</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-05 11:40:00" itemprop="dateCreated datePublished" datetime="2018-06-05T11:40:00+08:00">2018-06-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/06/05/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%917.%E9%A9%97%E8%AD%89%E5%8F%83%E6%95%B8-DataAnnotations%20/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/06/05/【MVC教學】7.驗證參數-DataAnnotations /" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <div class="note info">
            <p>Demo範例 ：<a target="_blank" rel="noopener" href="https://github.com/toyo0103/HelloDotNetMVC">Git位置</a></p>
          </div>

<h1 id="什麼是DataAnnotations"><a href="#什麼是DataAnnotations" class="headerlink" title="#什麼是DataAnnotations"></a>#什麼是DataAnnotations</h1><p>DataAnnotations是.Net Framework 3.5之後提供的一個命名空間，裡面包含了一些基本的驗證Attribute，同時也提供客製化的方法，希望開發人員能透過簡單的加上Attribute即達到驗證的效果。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserSignUpParameter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    [<span class="meta">Required</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>  Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h1 id="如何使用"><a href="#如何使用" class="headerlink" title="#如何使用"></a>#如何使用</h1><p>我們透過修改先前的範例，嘗試將<strong>UserSignUpParameter</strong>的驗證從FluentValidation改成用MVC預設提供的DataAnnotations來達成，從修改中學習他是如何運作的。</p>
<p><strong>重新審視一下需求</strong></p>
<div class="note info">
            <p><strong>帳號</strong></p><ul><li>必填</li><li>必須包含@</li></ul><p><strong>密碼</strong></p><ul><li>必填</li><li>不得小於6個字元</li></ul>
          </div>





<h2 id="RequiredAttribute"><a href="#RequiredAttribute" class="headerlink" title="RequiredAttribute"></a>RequiredAttribute</h2><p>RequiredAttribute為DataAnnotations預設提供的驗證方式，目標是驗證該欄位是否為Null或Empty</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 摘要:</span></span><br><span class="line"><span class="comment">//     指定資料欄位值為必要。</span></span><br><span class="line">[<span class="meta">AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RequiredAttribute</span> : <span class="title">ValidationAttribute</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">    <span class="comment">// 摘要:</span></span><br><span class="line">    <span class="comment">//     初始化 System.ComponentModel.DataAnnotations.RequiredAttribute 類別的新執行個體。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RequiredAttribute</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">    <span class="comment">// 摘要:</span></span><br><span class="line">    <span class="comment">//     取得或設定值，指出是否允許空字串。</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// 傳回:</span></span><br><span class="line">    <span class="comment">//     true 如果允許空字串。否則， false。 預設值是 false。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> AllowEmptyStrings &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">    <span class="comment">// 摘要:</span></span><br><span class="line">    <span class="comment">//     檢查必要的資料欄位的值不是空的。</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// 參數:</span></span><br><span class="line">    <span class="comment">//   value:</span></span><br><span class="line">    <span class="comment">//     要驗證的資料欄位值。</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// 傳回:</span></span><br><span class="line">    <span class="comment">//     true 如果驗證成功。否則， false。</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// 例外狀況:</span></span><br><span class="line">    <span class="comment">//   T:System.ComponentModel.DataAnnotations.ValidationException:</span></span><br><span class="line">    <span class="comment">//     資料欄位值為 null。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">IsValid</span>(<span class="params"><span class="built_in">object</span> <span class="keyword">value</span></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>從上述的程式碼可以看出它有提供<strong>AllowEmptyStrings</strong>的屬性可以設定，意義如同字面意思，可以<strong>EmptyString</strong>。</p>
<h3 id="AllowEmptyStrings"><a href="#AllowEmptyStrings" class="headerlink" title="AllowEmptyStrings"></a>AllowEmptyStrings</h3><p>我們先將Account掛上Required，並且指定屬性AllowEmptyStrings為True，執行看看</p>
<div class="note info">
            <p>繼承自Attribute的類別，在掛Attribute時可以省略後綴詞，所以可以看到程式碼只寫Required而不是RequiredAttribute</p>
          </div>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Parameter UserSignUp</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserSignUpParameter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    [<span class="meta">Required(AllowEmptyStrings =true)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>  Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 密碼</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Password &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>當Account傳入為Null時</p>
<p><img src="/images/20180615/1.png" alt="/images/20180615/1.png"></p>
<p>ModelState.IsValidate為False，在Values.Errors底下可以找到錯誤訊息<strong>Account 欄位是必要項。</strong></p>
<p><img src="/images/20180615/2.png" alt="/images/20180615/2.png"></p>
<p>接著改傳入<strong>空格</strong></p>
<p><img src="/images/20180615/3.png" alt="/images/20180615/3.png"></p>
<p>通過驗證</p>
<p><img src="/images/20180615/4.png" alt="/images/20180615/4.png"></p>
<h3 id="ErrorMessage"><a href="#ErrorMessage" class="headerlink" title="ErrorMessage"></a>ErrorMessage</h3><p>如果想修改錯誤的回傳訊息時，可以透過ErrorMessage來處理</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">[<span class="meta">Required(ErrorMessage = <span class="meta-string">&quot;帳號為必填欄位&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span>  Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>

<p>或是</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">[<span class="meta">Required(ErrorMessage = <span class="meta-string">&quot;&#123;0&#125;為必填欄位&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span>  Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>

<p>{0}的位置系統會自動帶入欄位名稱</p>
<p><img src="/images/20180615/5.png" alt="/images/20180615/5.png"></p>
<p>介紹完RequiredAttribute的基本用法後，目前程式碼如下</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Parameter UserSignUp</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserSignUpParameter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    [<span class="meta">Required(ErrorMessage = <span class="meta-string">&quot;&#123;0&#125;為必填欄位&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>  Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 密碼.</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    [<span class="meta">Required(ErrorMessage = <span class="meta-string">&quot;&#123;0&#125;為必填欄位&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Password &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="MinLengthAttribute"><a href="#MinLengthAttribute" class="headerlink" title="MinLengthAttribute"></a>MinLengthAttribute</h2><p>MinLengthAttribute是用來檢查屬性的最小字數，與MaxLengthAttribute為剛好相反的一組</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line">    <span class="comment">// 摘要:</span></span><br><span class="line">    <span class="comment">//     指定屬性中所允許之陣列或字串資料的最大長度。</span></span><br><span class="line">    [<span class="meta">AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MaxLengthAttribute</span> : <span class="title">ValidationAttribute</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 摘要:</span></span><br><span class="line">        <span class="comment">//     初始化 System.ComponentModel.DataAnnotations.MaxLengthAttribute 類別的新執行個體。</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MaxLengthAttribute</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 摘要:</span></span><br><span class="line">        <span class="comment">//     初始化的新執行個體 System.ComponentModel.DataAnnotations.MaxLengthAttribute 類別根據 length</span></span><br><span class="line">        <span class="comment">//     參數。</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 參數:</span></span><br><span class="line">        <span class="comment">//   length:</span></span><br><span class="line">        <span class="comment">//     陣列或字串資料的最大容許長度。</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MaxLengthAttribute</span>(<span class="params"><span class="built_in">int</span> length</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 摘要:</span></span><br><span class="line">        <span class="comment">//     取得陣列或字串資料所容許的最大長度。</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 傳回:</span></span><br><span class="line">        <span class="comment">//     陣列或字串資料的最大容許長度。</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Length &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 摘要:</span></span><br><span class="line">        <span class="comment">//     將格式套用到指定的錯誤訊息</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 參數:</span></span><br><span class="line">        <span class="comment">//   name:</span></span><br><span class="line">        <span class="comment">//     要包含在格式化字串中的名稱。</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 傳回:</span></span><br><span class="line">        <span class="comment">//     描述可接受之最大長度的當地語系化字串。</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">FormatErrorMessage</span>(<span class="params"><span class="built_in">string</span> name</span>)</span>;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 摘要:</span></span><br><span class="line">        <span class="comment">//     判斷指定的物件是否有效</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 參數:</span></span><br><span class="line">        <span class="comment">//   value:</span></span><br><span class="line">        <span class="comment">//     要驗證的物件。</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 傳回:</span></span><br><span class="line">        <span class="comment">//     如果此值為 null 或是小於或等於指定的最大長度，則為 true，否則為 false。</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// 例外狀況:</span></span><br><span class="line">        <span class="comment">//   T:System.InvalidOperationException:</span></span><br><span class="line">        <span class="comment">//     長度為零或小於 –1。</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">IsValid</span>(<span class="params"><span class="built_in">object</span> <span class="keyword">value</span></span>)</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>密碼<strong>最少應為6個字元</strong>設定方式，當然它同時也提供修改ErrorMessage的方法</p>
<p>{0}的位置系統會自動帶入欄位名稱</p>
<p>{1}的位置系統會帶入所設定的最小字元數字</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 密碼.</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span>    </span></span><br><span class="line">[<span class="meta">MinLength(6, ErrorMessage = <span class="meta-string">&quot;&#123;0&#125;不得低於&#123;1&#125;個字元&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> Password &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/20180615/6.png" alt="/images/20180615/6.png"></p>
<p><img src="/images/20180615/7.png" alt="/images/20180615/7.png"></p>
<h2 id="RegularExpression"><a href="#RegularExpression" class="headerlink" title="RegularExpression"></a>RegularExpression</h2><p>Account還有一個需求是必須包含@字元，這時候可以透過預設提供的RegularExpression來達成需求</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line">   <span class="comment">// 摘要:</span></span><br><span class="line">   <span class="comment">//     指定 ASP.NET 動態資料的資料欄位值必須符合指定的規則運算式。</span></span><br><span class="line">   [<span class="meta">AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false)</span>]</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RegularExpressionAttribute</span> : <span class="title">ValidationAttribute</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 摘要:</span></span><br><span class="line">       <span class="comment">//     初始化 System.ComponentModel.DataAnnotations.RegularExpressionAttribute 類別的新執行個體。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 參數:</span></span><br><span class="line">       <span class="comment">//   pattern:</span></span><br><span class="line">       <span class="comment">//     用來驗證資料欄位值的規則運算式。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 例外狀況:</span></span><br><span class="line">       <span class="comment">//   T:System.ArgumentNullException:</span></span><br><span class="line">       <span class="comment">//     pattern 為 null。</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">RegularExpressionAttribute</span>(<span class="params"><span class="built_in">string</span> pattern</span>)</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 摘要:</span></span><br><span class="line">       <span class="comment">//     取得規則運算式模式。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 傳回:</span></span><br><span class="line">       <span class="comment">//     要比對模式。</span></span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> Pattern &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 摘要:</span></span><br><span class="line">       <span class="comment">//     取得或設定執行單一比對作業，直到作業逾時之前的時間 (以毫秒為單位)。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 傳回:</span></span><br><span class="line">       <span class="comment">//     執行單一比對作業的時間 (以毫秒為單位)。</span></span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">int</span> MatchTimeoutInMilliseconds &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 摘要:</span></span><br><span class="line">       <span class="comment">//     格式化要顯示在規則運算式驗證失敗時的錯誤訊息。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 參數:</span></span><br><span class="line">       <span class="comment">//   name:</span></span><br><span class="line">       <span class="comment">//     造成驗證失敗的欄位名稱。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 傳回:</span></span><br><span class="line">       <span class="comment">//     格式化的錯誤訊息。</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">FormatErrorMessage</span>(<span class="params"><span class="built_in">string</span> name</span>)</span>;</span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 摘要:</span></span><br><span class="line">       <span class="comment">//     會檢查使用者輸入的值是否符合規則運算式模式。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 參數:</span></span><br><span class="line">       <span class="comment">//   value:</span></span><br><span class="line">       <span class="comment">//     要驗證的資料欄位值。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 傳回:</span></span><br><span class="line">       <span class="comment">//     true 如果驗證成功。否則， false。</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="comment">// 例外狀況:</span></span><br><span class="line">       <span class="comment">//   T:System.ComponentModel.DataAnnotations.ValidationException:</span></span><br><span class="line">       <span class="comment">//     資料欄位值不符合規則運算式模式。</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">IsValid</span>(<span class="params"><span class="built_in">object</span> <span class="keyword">value</span></span>)</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>可以透過寫正規表示法的方式來驗證想驗證的屬性，一樣有ErrorMessage可供使用</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">[<span class="meta">RegularExpression(<span class="meta-string">&quot;[@]+&quot;</span>,ErrorMessage =<span class="meta-string">&quot;&#123;0&#125;必須包含@字元&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/20180615/8.png" alt="/images/20180615/8.png"></p>
<p><img src="/images/20180615/9.png" alt="/images/20180615/9.png"></p>
<h2 id="其它Attribute"><a href="#其它Attribute" class="headerlink" title="其它Attribute"></a>其它Attribute</h2><p>DataAnnotations還有提供一些預設的Attribute可以使用，篇幅有限就不一一介紹，有興趣的可以參考以下文章</p>
<div class="note info">
            <p><a target="_blank" rel="noopener" href="http://dotnetmentors.com/mvc/how-to-validate-mvc-model-using-dataannotation-attributes.aspx">How To Validate MVC Model Using DataAnnotation Attribute</a></p><p><a target="_blank" rel="noopener" href="https://msdn.microsoft.com/zh-tw/library/system.componentmodel.dataannotations.validationattribute(v=vs.110).aspx">MSDN - ValidationAttribute 類別</a></p>
          </div>





<h1 id="客製"><a href="#客製" class="headerlink" title="#客製"></a>#客製</h1><p>如果碰到一個驗證需要在多個地方使用，且預設沒有提供的話，這時候就可以透過自製驗證Attribute來解決，我們以**字元需包含@**為例</p>
<h2 id="繼承ValidationAttribute"><a href="#繼承ValidationAttribute" class="headerlink" title="繼承ValidationAttribute"></a>繼承ValidationAttribute</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MouseCharactersAttribute</span>: <span class="title">ValidationAttribute</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">       <span class="comment"><span class="doctag">///</span> Returns true if ... is valid.</span></span><br><span class="line">       <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">       <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>要驗證之物件的值。<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">       <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span></span></span><br><span class="line">       <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;see langword=&quot;true&quot; /&gt;</span> 指定的值是否有效。否則， <span class="doctag">&lt;see langword=&quot;false&quot; /&gt;</span>。</span></span><br><span class="line">       <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">IsValid</span>(<span class="params"><span class="built_in">object</span> <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>       &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">base</span>.IsValid(<span class="keyword">value</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h2 id="Override-IsValid-Method"><a href="#Override-IsValid-Method" class="headerlink" title="Override IsValid Method"></a>Override IsValid Method</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">IsValid</span>(<span class="params"><span class="built_in">object</span> <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>   &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">value</span> == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;   </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> stringValue = <span class="keyword">value</span> <span class="keyword">as</span> <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stringValue.Contains(<span class="string">&quot;@&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>將原本的<strong>RegularExpression</strong>改成我們客製的<strong>MouseCharacters</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">  <span class="comment"><span class="doctag">///</span> 帳號</span></span><br><span class="line">  <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">  [<span class="meta">MouseCharacters(ErrorMessage =<span class="meta-string">&quot;&#123;0&#125;必須包含@字元&quot;</span>)</span>]</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> Account &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>

<p>實測會發現結果是一樣的</p>
<p><img src="/images/20180615/10.png" alt="/images/20180615/10.png"></p>
<h1 id="比較FluentValidation"><a href="#比較FluentValidation" class="headerlink" title="#比較FluentValidation"></a>#比較FluentValidation</h1><p>DataAnnotations其實使用起來相當方便，且只要知道如何客製ValidationAttribute基本上大部分情境都能解決，加上套用Attribute的方式算是相當親民的寫法。</p>
<p>但我本身基於單一職責的原則下，還是喜歡將驗證邏輯等方法分離到不同的Class管理，而這也正是FluentValidation套件的特性，不過這是見仁見智，就像大部分Pattern一樣，永遠不會有最好的解法，只要能花最小的成本解決需求，同時盡量不犧牲維護及擴充性，那就稱得上是好方法了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/06/04/%E3%80%90%E6%BC%94%E7%AE%97%E6%B3%95%E3%80%91Counting%20Sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/04/%E3%80%90%E6%BC%94%E7%AE%97%E6%B3%95%E3%80%91Counting%20Sort/" class="post-title-link" itemprop="url">【演算法】Counting Sort</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-04 14:42:00" itemprop="dateCreated datePublished" datetime="2018-06-04T14:42:00+08:00">2018-06-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/06/04/%E3%80%90%E6%BC%94%E7%AE%97%E6%B3%95%E3%80%91Counting%20Sort/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/06/04/【演算法】Counting Sort/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="何謂Counting-Sort"><a href="#何謂Counting-Sort" class="headerlink" title="何謂Counting Sort"></a>何謂Counting Sort</h1><p>是一種排序的演算法，特色是不需要比較數字間的大小，而是透過計算在Array中的Index的位置來達到排序的效果，限制是必須先知道數字的範圍以及數字組的個數，屬於線性排序 O(n) 。</p>
<h1 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h1><div class="note info">
            <p>Suppose you have an array of 1000 integers. The integers are in random order, but you know each of the integers is between 1 and 5000 (inclusive). In addition, each number appears only once in the array. Assume that you can access each element of the array only once. Describe an algorithm to sort it. </p><p>假設你有個數字陣列其中包含1000個數字，且這些數字來自1~5000之間不重複，請用一組演算法來達成只讀取數字一次並排序完成。</p>
          </div>

<h2 id="解題"><a href="#解題" class="headerlink" title="解題"></a>解題</h2><p><strong>欲排序的陣列</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//隨機取1000個</span></span><br><span class="line"><span class="built_in">int</span> Amount = <span class="number">1000</span>;</span><br><span class="line"><span class="comment">//隨機從1~5000中取出不重複的1000個數字</span></span><br><span class="line"><span class="built_in">int</span>[] IntPool = Enumerable.Range(<span class="number">1</span>, <span class="number">5000</span>).OrderBy(x =&gt; Guid.NewGuid()).Take(Amount).ToArray();</span><br></pre></td></tr></table></figure>
<p><strong>準備一個的數字陣列，空間為5000</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] IndexArray = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">5000</span>];</span><br></pre></td></tr></table></figure>
<p><strong>計算哪些位置應該存在數字</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> element <span class="keyword">in</span> IntPool)</span><br><span class="line">&#123;</span><br><span class="line">    IndexArray[ element <span class="number">-1</span> ] ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>將IndexArray中值為1的挑出來</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] Result = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">var</span> Index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; IndexArray.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (IndexArray[i] &gt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		Result[Index] = i + <span class="number">1</span>;</span><br><span class="line">		Index++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//此時Result即為排序後的結果</span></span><br></pre></td></tr></table></figure>

<h1 id="案例二"><a href="#案例二" class="headerlink" title="案例二"></a>案例二</h1><div class="note info">
            <p>假設你有個數字陣列其中包含1000個數字，這些數字來自1~5000之間且<strong>可能會重複</strong>，如何用Counting Sort達成排序</p>
          </div>

<h2 id="解題-1"><a href="#解題-1" class="headerlink" title="解題"></a>解題</h2><p><strong>欲排序的陣列</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Random Rnd = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="built_in">int</span>[] IntPool  =<span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">   IntPool[i] = Rnd.Next(<span class="number">1</span>,<span class="number">5001</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>找出最大值與最小值</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> Min = IntPool[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">int</span> Max = IntPool[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; IntPool.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (IntPool[i] &gt; Max)</span><br><span class="line">		Max = IntPool[i];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (IntPool[i] &lt; Min)</span><br><span class="line">		Min = IntPool[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>準備一個能容納最大範圍的IndexArray</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] IndexArray = <span class="keyword">new</span> <span class="built_in">int</span>[Max - Min +<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<p><strong>計算每個數字在IndexArray中的相對位置，並統計每個位置重複的數字數</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> element <span class="keyword">in</span> IntPool)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//統計每個位置有幾個重複的數字</span></span><br><span class="line">	IndexArray[element - Min] ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>計算每個位置累積的數字個數</strong><br>這邊是我想比較久的地方，所以畫了一個圖希望能幫助理解，假設我們算出來後陣列長這樣，表示Index 0放著2個數字，Index 2有1個數字，Index 4有1個數字以此類推<br><a href="/images/20180614/1/1.png"><img src="/images/20180614/1/1.png"></a><br>所以如果我們將每個位置的數字與前一格相加，可以得到該Index實際上已經排了幾個數字，<br><a href="/images/20180614/1/2.png"><img src="/images/20180614/1/2.png"></a></p>
<p><strong>計算到達該位子時，實際上總共已經有幾個數字</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; IndexArray.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">	IndexArray[i] = IndexArray[i] + IndexArray[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>排序</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] Result = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> element <span class="keyword">in</span> IntPool)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">var</span> TotalCount = IndexArray[element - Min];</span><br><span class="line">	<span class="comment">//第幾個數字-1，其實就表示他要放在Result的Index位置</span></span><br><span class="line">	Result[TotalCount- <span class="number">1</span>] = element;</span><br><span class="line">	IndexArray[element - Min] --;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//此時Result即為排序後的結果</span></span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/05/07/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%916.%E9%A9%97%E8%AD%89%E5%8F%83%E6%95%B8-%E9%80%8F%E9%81%8EFluentValidation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/07/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%916.%E9%A9%97%E8%AD%89%E5%8F%83%E6%95%B8-%E9%80%8F%E9%81%8EFluentValidation/" class="post-title-link" itemprop="url">【MVC教學】6.驗證參數- 透過FluentValidation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-05-07 18:23:00" itemprop="dateCreated datePublished" datetime="2018-05-07T18:23:00+08:00">2018-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/05/07/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%916.%E9%A9%97%E8%AD%89%E5%8F%83%E6%95%B8-%E9%80%8F%E9%81%8EFluentValidation/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/05/07/【MVC教學】6.驗證參數-透過FluentValidation/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <div class="note info">
            <p>Demo範例 ：<a target="_blank" rel="noopener" href="https://github.com/toyo0103/HelloDotNetMVC">Git位置</a></p>
          </div>

<p>上一篇簡介了Controller如何安排程式邏輯流程、驗證參數，卻也發現了驗證參數導致程式寫得冗長不易維護，這一篇要介紹【FluentValidation】這個套件來解決這個問題。</p>
<h1 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h1><p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-xZDktMEHvG4/WvAKIceF2VI/AAAAAAAAIuQ/psmk0OXE26sun-H3XramjrzcSCNrD3QgACLcBGAs/s1600/1.png"><img src="https://1.bp.blogspot.com/-xZDktMEHvG4/WvAKIceF2VI/AAAAAAAAIuQ/psmk0OXE26sun-H3XramjrzcSCNrD3QgACLcBGAs/s400/1.png"></a><br><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-uGUzfrokFpI/WvAKaNzXTKI/AAAAAAAAIuY/1O8SMAL7FgkP5wX5l2BBYOKhcPSAF_o_gCLcBGAs/s1600/2.png"><img src="https://2.bp.blogspot.com/-uGUzfrokFpI/WvAKaNzXTKI/AAAAAAAAIuY/1O8SMAL7FgkP5wX5l2BBYOKhcPSAF_o_gCLcBGAs/s400/2.png"></a><br><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-kfFy1Iqdl1M/WvALDvzwBKI/AAAAAAAAIug/YO4AjyC_No42Xg24hCgC02nf1Qjwb1ZeACLcBGAs/s1600/3.png" title="安裝完後應該會在參考中看到多出兩個FluentValidation的組件"><img src="https://3.bp.blogspot.com/-kfFy1Iqdl1M/WvALDvzwBKI/AAAAAAAAIug/YO4AjyC_No42Xg24hCgC02nf1Qjwb1ZeACLcBGAs/s320/3.png"></a></p>
<h1 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h1><p>把之前的程式碼稍作整理，將Account與Password新建一個類型(Class)來封裝起來，原本Controller裡面的程式整理一下</p>
<p><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-7bpU-eurJAI/WvANP8ghptI/AAAAAAAAIus/ayYDM6pHzhwgsRgEigXWwUNGCRGIc7X6wCLcBGAs/s1600/4.png"><img src="https://3.bp.blogspot.com/-7bpU-eurJAI/WvANP8ghptI/AAAAAAAAIus/ayYDM6pHzhwgsRgEigXWwUNGCRGIc7X6wCLcBGAs/s400/4.png"></a></p>
<p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-eIdaQ522IWo/WvAOfKE3BBI/AAAAAAAAIu0/wUYV51Bv-qAP5Dl-vmOAd_fNomrKCjFYwCLcBGAs/s1600/5.png"><img src="https://4.bp.blogspot.com/-eIdaQ522IWo/WvAOfKE3BBI/AAAAAAAAIu0/wUYV51Bv-qAP5Dl-vmOAd_fNomrKCjFYwCLcBGAs/s640/5.png"></a></p>
<h2 id="自定義驗證Class"><a href="#自定義驗證Class" class="headerlink" title="自定義驗證Class"></a>自定義驗證Class</h2><p>建立一個Class命名為UserSignUpParameterValidation</p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-CGzCYQgNgpI/WvAQfRjh6rI/AAAAAAAAIvA/W__122acCJg4ivhkTljIzoKdeB3JYM0jwCLcBGAs/s1600/6.png"><img src="https://2.bp.blogspot.com/-CGzCYQgNgpI/WvAQfRjh6rI/AAAAAAAAIvA/W__122acCJg4ivhkTljIzoKdeB3JYM0jwCLcBGAs/s640/6.png"></a></p>
<p>將UserSignUpParameter掛上Validator Attribute，意思是UserSignUpParameter請幫我用UserSignUpParameterValidation裡面的邏輯來驗證</p>
<p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-znw_JXDtBNI/WvARI9F6b8I/AAAAAAAAIvI/D4GtFgo5dQc06aEnUhlKjE503vuXegEmgCLcBGAs/s1600/7.png"><img src="https://4.bp.blogspot.com/-znw_JXDtBNI/WvARI9F6b8I/AAAAAAAAIvI/D4GtFgo5dQc06aEnUhlKjE503vuXegEmgCLcBGAs/s400/7.png"></a></p>
<h2 id="帳號密碼不能為空值"><a href="#帳號密碼不能為空值" class="headerlink" title="帳號密碼不能為空值"></a>帳號密碼不能為空值</h2><p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-ZEqu3b-BvNc/WvARv5EsieI/AAAAAAAAIvQ/PZO_L_04kLsABp9rYw6dnXYYnKAymKEwACLcBGAs/s1600/8.png"><img src="https://1.bp.blogspot.com/-ZEqu3b-BvNc/WvARv5EsieI/AAAAAAAAIvQ/PZO_L_04kLsABp9rYw6dnXYYnKAymKEwACLcBGAs/s400/8.png"></a></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Validation UserSignUpParameter</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;seealso cref=&quot;FluentValidation.AbstractValidator&#123;HelloDotNetMVC.Parameters.UserSignUpParameter&#125;&quot; /&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserSignUpParameterValidation</span>:<span class="title">AbstractValidator</span>&lt;<span class="title">UserSignUpParameter</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserSignUpParameterValidation</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">//AbstractValidator為FluentValidation提供的抽象類別</span></span><br><span class="line">        <span class="comment">//目的是讓使用者可以透過繼承這個抽象類別後，實作自己的驗證邏輯</span></span><br><span class="line">        <span class="comment">//而泛型T， AbstractValidator&lt;T&gt; ，則帶入你想驗證的類別</span></span><br><span class="line">        <span class="comment">//所以這邊帶入UserSignUpParameter，這個我們剛剛製作的Class</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Account</span></span><br><span class="line">        RuleFor(x =&gt; x.Account)</span><br><span class="line">        .NotEmpty()</span><br><span class="line">        .WithMessage(<span class="string">&quot;帳號不能為Empty&quot;</span>)</span><br><span class="line">        .NotNull()</span><br><span class="line">        .WithMessage(<span class="string">&quot;帳號不能為Null&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Password</span></span><br><span class="line">        RuleFor(x=&gt;x.Password)</span><br><span class="line">        .NotEmpty()</span><br><span class="line">        .WithMessage(<span class="string">&quot;密碼不能為Empty&quot;</span>)</span><br><span class="line">        .NotNull()</span><br><span class="line">        .WithMessage(<span class="string">&quot;密碼不能為Null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RuleFor是FluentValidation提供的方法，意思是我為Account這個屬性建立驗證的Rule，而Rule分別是，NotEmpty(不能為空值)、NotNull(不能為Null)，而緊接在每個驗證邏輯下面的WithMessage則是表示，當發生它上面的錯誤時，錯誤訊息請回傳這行。</p>
<p>接著我們可以將Controller的這塊驗證邏輯拿掉，交給<strong>UserSignUpParameterValidation</strong>專責處理就好。</p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-xebs-1HJ_Xo/WvAT_qTPsOI/AAAAAAAAIvc/PNSq-SW_qdczF4pHIZCzu8hhnsQdpMN1gCLcBGAs/s1600/9.png"><img src="https://2.bp.blogspot.com/-xebs-1HJ_Xo/WvAT_qTPsOI/AAAAAAAAIvc/PNSq-SW_qdczF4pHIZCzu8hhnsQdpMN1gCLcBGAs/s400/9.png"></a></p>
<h2 id="帳號必須包含-字元，Password必須大於6個字"><a href="#帳號必須包含-字元，Password必須大於6個字" class="headerlink" title="帳號必須包含@字元，Password必須大於6個字"></a>帳號必須包含@字元，Password必須大於6個字</h2><p>因為判斷字元@並不像判斷空值與Null一樣，官方有實做好的方法，必須自己透過Must來定義，這邊提供兩種寫法給讀者參考</p>
<p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-Qd2w4MEWlFk/WvAV24u79OI/AAAAAAAAIvo/ZUAMLs0fn6kx07JMLchQHKYOsP_fKCwvQCLcBGAs/s1600/10.png"><img src="https://4.bp.blogspot.com/-Qd2w4MEWlFk/WvAV24u79OI/AAAAAAAAIvo/ZUAMLs0fn6kx07JMLchQHKYOsP_fKCwvQCLcBGAs/s320/10.png"></a></p>
<p>上面是匿名方法的寫法，但如果你對於匿名委派還不是很熟悉，也可以用比較簡單的方式寫</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://4.bp.blogspot.com/-KmJSyZdiGb0/WvAWiccBedI/AAAAAAAAIvw/17gYP6xPzgIUFII1ptocXolNHkBXfGeegCLcBGAs/s400/11.png)](https://4.bp.blogspot.com/-KmJSyZdiGb0/WvAWiccBedI/AAAAAAAAIvw/17gYP6xPzgIUFII1ptocXolNHkBXfGeegCLcBGAs/s1600/11.png)</div>
先寫好驗證的方法，然後在Must中帶入方法。

<div class="note info">
            <p>延伸閱讀 :<br><a target="_blank" rel="noopener" href="https://msdn.microsoft.com/zh-tw/library/bb549151(v=vs.110).aspx">MSDN : Func&lt;T,TResult&gt; 委派</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/dotnet/csharp/programming-guide/statements-expressions-operators/anonymous-methods">MSDN : 匿名方法</a></p>
          </div>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Validation UserSignUpParameter</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;seealso cref=&quot;FluentValidation.AbstractValidator&#123;HelloDotNetMVC.Parameters.UserSignUpParameter&#125;&quot; /&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserSignUpParameterValidation</span>:<span class="title">AbstractValidator</span>&lt;<span class="title">UserSignUpParameter</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserSignUpParameterValidation</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">//AbstractValidator為FluentValidation提供的抽象類別</span></span><br><span class="line">        <span class="comment">//目的是讓使用者可以透過繼承這個抽象類別後，實作自己的驗證邏輯</span></span><br><span class="line">        <span class="comment">//而泛型T， AbstractValidator&lt;T&gt; ，則帶入你想驗證的類別</span></span><br><span class="line">        <span class="comment">//所以這邊帶入UserSignUpParameter，這個我們剛剛製作的Class</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Account</span></span><br><span class="line">        RuleFor(x =&gt; x.Account)</span><br><span class="line">        .NotEmpty()</span><br><span class="line">        .WithMessage(<span class="string">&quot;帳號不能為Empty&quot;</span>)</span><br><span class="line">        .NotNull()</span><br><span class="line">        .WithMessage(<span class="string">&quot;帳號不能為Null&quot;</span>)</span><br><span class="line">        .Must(IncludeAccountKeyword)</span><br><span class="line">        .WithMessage(<span class="string">&quot;帳號不符合格式&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Password</span></span><br><span class="line">        RuleFor(x=&gt;x.Password)</span><br><span class="line">        .NotEmpty()</span><br><span class="line">        .WithMessage(<span class="string">&quot;密碼不能為Empty&quot;</span>)</span><br><span class="line">        .NotNull()</span><br><span class="line">        .WithMessage(<span class="string">&quot;密碼不能為Null&quot;</span>)</span><br><span class="line">        .MinimumLength(<span class="number">7</span>)</span><br><span class="line">        .WithMessage(<span class="string">&quot;密碼必須大於6個字元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> Accounts 必須包含@.</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;account&quot;&gt;</span>The account.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">IncludeAccountKeyword</span>(<span class="params"><span class="built_in">string</span> account</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrWhiteSpace(account))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> account.Contains(<span class="string">&quot;@&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>整理後的Controller</p>
<p><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-VBKP-msTxnE/WvAYvl0-HBI/AAAAAAAAIv8/tgh1Rp_cN0cyjKsFKbOnefX9VsBI5HPWQCLcBGAs/s1600/12.png"><img src="https://3.bp.blogspot.com/-VBKP-msTxnE/WvAYvl0-HBI/AAAAAAAAIv8/tgh1Rp_cN0cyjKsFKbOnefX9VsBI5HPWQCLcBGAs/s400/12.png"></a></p>
<h2 id="透過ModelState得知驗證結果"><a href="#透過ModelState得知驗證結果" class="headerlink" title="透過ModelState得知驗證結果"></a>透過ModelState得知驗證結果</h2><div class="note info">
            <p>ModelState是本來MVC就有提供的參數驗證方式，而使用方法這邊提供幾篇文章給有興趣的讀者參考<br><a target="_blank" rel="noopener" href="https://www.exceptionnotfound.net/asp-net-mvc-demystified-modelstate/">What is the ModelState? - ASP.NET MVC Demystified</a><br><a target="_blank" rel="noopener" href="https://blog.miniasp.com/post/2016/03/14/ASPNET-MVC-Developer-Note-Part-28-Understanding-ModelState.aspx">保哥 : ASP.NET MVC 開發心得分享 (28)：深入了解 ModelState 內部細節</a></p>
          </div>

<p>而因為開發習慣的關係，我習慣用FluentValidation的方式來取代原本ModelState驗證方法與設定方式，接著我們在Global.asax中呼叫FluentValidationModelValidatorProvider.Configure()</p>
<p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-MtTiRt-qd-0/WvAjEv49mHI/AAAAAAAAIwM/cAcBsXbIuCEgOlfsPQVCMMB58ne84x8uQCLcBGAs/s1600/13.png"><img src="https://1.bp.blogspot.com/-MtTiRt-qd-0/WvAjEv49mHI/AAAAAAAAIwM/cAcBsXbIuCEgOlfsPQVCMMB58ne84x8uQCLcBGAs/s400/13.png"></a></div> </p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> ActionResult <span class="title">SignUp</span>(<span class="params">UserSignUpParameter parameter</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!ModelState.IsValid)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//IsValida為False時，表示驗證參數不過</span></span><br><span class="line">        <span class="comment">//取出第一筆錯誤訊息回傳</span></span><br><span class="line">        <span class="keyword">var</span> Error = ModelState.Values.SelectMany(x =&gt; x.Errors).First();</span><br><span class="line">        TempData[<span class="string">&quot;Message&quot;</span>] = Error.ErrorMessage;</span><br><span class="line">        <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;signup&quot;</span>, <span class="string">&quot;user&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//這邊沒有搬到FluentValidation去驗證的原因是</span></span><br><span class="line">    <span class="comment">//使用者存在與否比較屬於服務層的事情，通常需要讀取資料庫才能判斷</span></span><br><span class="line">    <span class="comment">//開發上習慣盡量讓驗證參數越乾淨簡單越好，而不是在裡面呼叫很多外部服務(例如資料庫)後做驗證</span></span><br><span class="line">    <span class="comment">//這會讓職責過於複雜</span></span><br><span class="line">    <span class="keyword">if</span> (parameter.Account != <span class="string">&quot;steven@mymail.com&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        TempData[<span class="string">&quot;Message&quot;</span>] = <span class="string">&quot;註冊成功!!&quot;</span>;</span><br><span class="line">        <span class="comment">//註冊成功,導到首頁 </span></span><br><span class="line">        <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;index&quot;</span>, <span class="string">&quot;home&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        TempData[<span class="string">&quot;Message&quot;</span>] = <span class="string">&quot;帳號已經存在&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;signup&quot;</span>, <span class="string">&quot;user&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接著執行程式，驗證看看是否之前的驗證邏輯都還是正常運作。</p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-eQpSlQBWHTE/WvAoYn_ChaI/AAAAAAAAIwk/C-Y7_RCGGuIvOHE8u-VhS8OPriHmspgpgCLcBGAs/s1600/15.png"><img src="https://2.bp.blogspot.com/-eQpSlQBWHTE/WvAoYn_ChaI/AAAAAAAAIwk/C-Y7_RCGGuIvOHE8u-VhS8OPriHmspgpgCLcBGAs/s400/15.png"></a> <a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-yVOQuBNw_cM/WvAoYoDVp_I/AAAAAAAAIwg/aGZLbMDSrTgCcZS2TwFEfFzGMiYktMsXACLcBGAs/s1600/16.png"><img src="https://3.bp.blogspot.com/-yVOQuBNw_cM/WvAoYoDVp_I/AAAAAAAAIwg/aGZLbMDSrTgCcZS2TwFEfFzGMiYktMsXACLcBGAs/s400/16.png"></a><br><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-Qyvaso2H-qg/WvAoYTtzkxI/AAAAAAAAIwc/wILEhIgySEExN0Wy-V33ohsrwpIKpG-JACLcBGAs/s1600/14.png"><img src="https://2.bp.blogspot.com/-Qyvaso2H-qg/WvAoYTtzkxI/AAAAAAAAIwc/wILEhIgySEExN0Wy-V33ohsrwpIKpG-JACLcBGAs/s400/14.png"></a></p>
<p>比較一下最一開始與套用FluentValidation後的程式碼，應該可以明顯感受到差異，這不僅僅只是讓程式變乾淨，更重要的是驗證參數的職責被分離到UserSignUpParameterValidation這個類別中，以後要改參數驗證的邏輯只要到這調整即可，不用再擔心Controller會被不小心改壞。</p>
<p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-3mLUKzjO55A/WvArsPEl3hI/AAAAAAAAIw0/8AidDEBX-jwgO7iFO3nyt7ENHCg8xd7PwCLcBGAs/s1600/17.png"><img src="https://4.bp.blogspot.com/-3mLUKzjO55A/WvArsPEl3hI/AAAAAAAAIw0/8AidDEBX-jwgO7iFO3nyt7ENHCg8xd7PwCLcBGAs/s640/17.png"></a></p>
<h1 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h1><p><a target="_blank" rel="noopener" href="https://github.com/JeremySkinner/FluentValidation/wiki">FluentValidation : 官方文件、各種API使用方法</a><br><a target="_blank" rel="noopener" href="https://toyo0103.blogspot.tw/2016/10/fluentvalidation-webapi.html">FluentValidation : 擴充驗證方法</a><br><a target="_blank" rel="noopener" href="https://toyo0103.blogspot.tw/2016/11/fluentvalidation.html">FluentValidation : 繼承父類別的驗證</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/04/25/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%915.Controller%E7%B0%A1%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/25/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%915.Controller%E7%B0%A1%E4%BB%8B/" class="post-title-link" itemprop="url">【MVC教學】5.Controller簡介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-25 23:08:00" itemprop="dateCreated datePublished" datetime="2018-04-25T23:08:00+08:00">2018-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/04/25/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%915.Controller%E7%B0%A1%E4%BB%8B/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/04/25/【MVC教學】5.Controller簡介/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <div class="note info">
            <p>Demo範例 ： <a target="_blank" rel="noopener" href="https://github.com/toyo0103/HelloDotNetMVC">Git位置</a></p>
          </div>

<p>前面幾篇解說了Route設定，讓我們的程式能順利找到對應的Controller來執行，那今天要來談談Controller幫我們做些什麼？<br>我們通常會在Controller這層就將使用者的參數<strong>驗證</strong>完畢，並且依據傳入的參數，找到對應的商業邏輯去執行，並且回傳結果給使用者知道，已註冊頁面作為實際應用來解說。</p>
<p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-1s0A__te0ws/WuCCI7_4QvI/AAAAAAAAIq0/qwTcF7tfpGAajtSMNZ8FPKhw0q7ImxPrgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.26.31.png"><img src="https://4.bp.blogspot.com/-1s0A__te0ws/WuCCI7_4QvI/AAAAAAAAIq0/qwTcF7tfpGAajtSMNZ8FPKhw0q7ImxPrgCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.26.31.png"></a></p>
<p>接著我們來實作上述的內容，但因為只是MVC初學，所以我們還不加入分層、資料庫溝通之類比較深的內容，只專注在Controller怎麼做。</p>
<p>&nbsp;</p>
<h1 id="建立Controller"><a href="#建立Controller" class="headerlink" title="建立Controller"></a>建立Controller</h1><p>&nbsp;<br>我們先建立一個UserController，專門處理User相關的服務跟邏輯</p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-y9ZNRe-qPbw/WuCDIfd8kUI/AAAAAAAAIq8/KA_bBs97zp8l7YrYxSwSNRqS14cqyA9KwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.30.36.png"><img src="https://2.bp.blogspot.com/-y9ZNRe-qPbw/WuCDIfd8kUI/AAAAAAAAIq8/KA_bBs97zp8l7YrYxSwSNRqS14cqyA9KwCLcBGAs/s320/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.30.36.png"></a></p>
<p>接著寫一個SignUp的Action，這邊有看到我們掛HttpGet的Attribute，只是指定呼叫動詞必須是Get的方式才會執行到這個Action</p>
<div class="note info">
            <p>如果不知道Http動詞的話可以參考 : <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-TW/docs/Web/HTTP/Methods">HTTP請求方法</a></p>
          </div>
<div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-KA_M1a5AopU/WuCDeRZvUuI/AAAAAAAAIrI/C66BwZf0wvw7Z2PDngjof-IgAzSwUE3bwCEwYBhgL/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.32.27.png)](https://1.bp.blogspot.com/-KA_M1a5AopU/WuCDeRZvUuI/AAAAAAAAIrI/C66BwZf0wvw7Z2PDngjof-IgAzSwUE3bwCEwYBhgL/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.32.27.png)</div>

<p>&nbsp;</p>
<h1 id="建立View"><a href="#建立View" class="headerlink" title="建立View"></a>建立View</h1><p>&nbsp;<br>而這個Action沒有任何內容，只有回傳一個View而已，接著我們來實作出回傳的頁面，在這個Action中點擊右鍵 &gt; 新增檢視</p>
<p><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-qEISXaQUqlA/WuCFCh80daI/AAAAAAAAIrQ/k2MbagqBBpk_iw-y7YRUKoTOwjjeWnazwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.37.38.png"><img src="https://3.bp.blogspot.com/-qEISXaQUqlA/WuCFCh80daI/AAAAAAAAIrQ/k2MbagqBBpk_iw-y7YRUKoTOwjjeWnazwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.37.38.png"></a><br><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-x2w81z28D6c/WuCFRqP49VI/AAAAAAAAIrU/c--eosiD0rU7Y_7j1c1ZZY3-k7YUGbeIQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.40.03.png"><img src="https://1.bp.blogspot.com/-x2w81z28D6c/WuCFRqP49VI/AAAAAAAAIrU/c--eosiD0rU7Y_7j1c1ZZY3-k7YUGbeIQCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.40.03.png"></a><br><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-RrarAQWIu6c/WuCFl5E-wvI/AAAAAAAAIrg/b6Lj5N-NGaU5dSZ3zM165O1zvvpzvA_gwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.41.30.png"><img src="https://3.bp.blogspot.com/-RrarAQWIu6c/WuCFl5E-wvI/AAAAAAAAIrg/b6Lj5N-NGaU5dSZ3zM165O1zvvpzvA_gwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.41.30.png"></a><br><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-j3xcFnMknHg/WuCF98nE2SI/AAAAAAAAIro/HOo9hoZwb6wAUQOJBcIRTqAeXTMSv8vXwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.42.21.png"><img src="https://4.bp.blogspot.com/-j3xcFnMknHg/WuCF98nE2SI/AAAAAAAAIro/HOo9hoZwb6wAUQOJBcIRTqAeXTMSv8vXwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%25889.42.21.png"></a></p>
<p>接著直接執行，應該就能看到我們剛剛做出來的SignUp頁面</p>
<p><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-SED-4nfjecw/WuCNG2uok7I/AAAAAAAAIr4/nOzZXjfM_FETp1KLNMU6-aLcf20L-IKCgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.13.28.png"><img src="https://3.bp.blogspot.com/-SED-4nfjecw/WuCNG2uok7I/AAAAAAAAIr4/nOzZXjfM_FETp1KLNMU6-aLcf20L-IKCgCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.13.28.png"></a><br>而這邊網址是 /user/signup，我覺得不夠直覺，所以到RouteConfig改一下<br><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-Ci1v26GtXFs/WuCODEjjM2I/AAAAAAAAIsI/EzpX1P_LRGU278UAsSeZb6S4BBTo-FZOQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.16.53.png"><img src="https://3.bp.blogspot.com/-Ci1v26GtXFs/WuCODEjjM2I/AAAAAAAAIsI/EzpX1P_LRGU278UAsSeZb6S4BBTo-FZOQCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.16.53.png"></a><br><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-mB5dxE3pyMQ/WuCOPhH0dhI/AAAAAAAAIsM/SZiLCNuxCWoI78quWen_W5o97Dy_4qUlACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.18.20.png"><img src="https://3.bp.blogspot.com/-mB5dxE3pyMQ/WuCOPhH0dhI/AAAAAAAAIsM/SZiLCNuxCWoI78quWen_W5o97Dy_4qUlACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.18.20.png"></a></p>
<p>接著把頁面簡單做起來</p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-mBcGm-zF5Ac/WuCPANF6GMI/AAAAAAAAIsc/-GE55rw9U1Q2cnTS8lL8ou0jXsAecxLzgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.21.21.png"><img src="https://2.bp.blogspot.com/-mBcGm-zF5Ac/WuCPANF6GMI/AAAAAAAAIsc/-GE55rw9U1Q2cnTS8lL8ou0jXsAecxLzgCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.21.21.png"></a><br><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-pBkzKrxXseo/WuCPK5DBR6I/AAAAAAAAIsg/hpxvNjOdxQAczfyTuTyNsAC4OnRP7jYfwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.21.35.png"><img src="https://4.bp.blogspot.com/-pBkzKrxXseo/WuCPK5DBR6I/AAAAAAAAIsg/hpxvNjOdxQAczfyTuTyNsAC4OnRP7jYfwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.21.35.png"></a><br>寫一個Action來接收傳過來的資料</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> ActionResult <span class="title">SignUp</span>(<span class="params"><span class="built_in">string</span> account,<span class="built_in">string</span> password</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">bool</span> Result = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//帳號密碼都不能為空值</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrWhiteSpace(account) &amp;amp;&amp;amp;</span><br><span class="line">        !<span class="built_in">string</span>.IsNullOrWhiteSpace(password))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//帳號必須要有@字元</span></span><br><span class="line">        <span class="comment">//密碼必須大於六個字元</span></span><br><span class="line">        <span class="keyword">if</span> (account.Contains(<span class="string">&quot;@&quot;</span>) &amp;amp;&amp;amp; password.Length &amp;gt; <span class="number">6</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//我們判斷是否有註冊過的帳號,因為還沒有連結資料庫</span></span><br><span class="line">            <span class="comment">//所以先假定steven@mymail.com被註冊過</span></span><br><span class="line">            <span class="keyword">if</span> (account != <span class="string">&quot;steven@mymail.com&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                TempData[<span class="string">&quot;Message&quot;</span>] = <span class="string">&quot;註冊成功!!&quot;</span>;</span><br><span class="line">                Result = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                TempData[<span class="string">&quot;Message&quot;</span>] = <span class="string">&quot;帳號已經存在&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            TempData[<span class="string">&quot;Message&quot;</span>] = <span class="string">&quot;帳號密碼不符合格式&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        TempData[<span class="string">&quot;Message&quot;</span>] = <span class="string">&quot;帳號密碼不能為空值&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Result)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//註冊成功,導到首頁 </span></span><br><span class="line">        <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;index&quot;</span>, <span class="string">&quot;home&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;signup&quot;</span>, <span class="string">&quot;user&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這邊注意到我們的Attribute就下了HttpPost，表示只有Post可以呼叫到這個Action，而我們在Form那邊也設定了方法用Post</p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-H9l67uz1TCk/WuCUxsRdhXI/AAAAAAAAIs4/SvdmC3Fc8nkKSVrlqhA6zSGoLOwfsvVkQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.45.44.png"><img src="https://2.bp.blogspot.com/-H9l67uz1TCk/WuCUxsRdhXI/AAAAAAAAIs4/SvdmC3Fc8nkKSVrlqhA6zSGoLOwfsvVkQCLcBGAs/s320/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.45.44.png"></a><br>接著你可能會注意到裡面有用到TempData，通常TempData是用來跨Action傳遞資料用的，底層其實是將資料存在Session之中，而且你只要取用過一次裡面的值就會被清掉。 而因為我們這個Action只是在處理註冊的相關邏輯，執行完後可以看到最後回傳的都是RedirectToAction，也就是導到我們指定的Action去回傳頁面，所以會跨兩個Action以上，存在TempData是個簡單的處理方式。</p>
<p>接著執行看看你會發現，好像一切有照著我們的邏輯在執行，但唯獨訊息不會顯示出來，因為我們雖然將TempData之中，卻沒有寫顯示訊息的那一段，通常這一段邏輯我們會放在共用的_Layout裡面。</p>
<p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-ozg16dsOSrE/WuCd9w_QvKI/AAAAAAAAItw/vCUtqPBHZHwgPF4bVbw47tKhBfhEPIkNACLcBGAs/s1600/14.png"><img src="https://1.bp.blogspot.com/-ozg16dsOSrE/WuCd9w_QvKI/AAAAAAAAItw/vCUtqPBHZHwgPF4bVbw47tKhBfhEPIkNACLcBGAs/s400/14.png"></a></p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-E1x50TUS8NQ/WuCXYxIgwPI/AAAAAAAAItI/aLOGjZ82wJ0Pjy-OxOBEdaa6kPXFmN9DQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.57.06.png"><img src="https://2.bp.blogspot.com/-E1x50TUS8NQ/WuCXYxIgwPI/AAAAAAAAItI/aLOGjZ82wJ0Pjy-OxOBEdaa6kPXFmN9DQCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.57.06.png"></a><br>因為還沒解說View的關係，這邊就先照著寫，之後會解說到。再次執行就會發現訊息會正確S顯示出來了。</p>
<p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-OFHFUMFcMwE/WuCX5I_64XI/AAAAAAAAItQ/FGMQUMK-RD4bq8lkfPJBI5aLPd_n2l2dgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.59.20.png"><img src="https://1.bp.blogspot.com/-OFHFUMFcMwE/WuCX5I_64XI/AAAAAAAAItQ/FGMQUMK-RD4bq8lkfPJBI5aLPd_n2l2dgCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.59.20.png"></a><br><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-XWHUszO3mxw/WuCX9g656vI/AAAAAAAAItU/DyrM8bb1848t9nO4xT8Pn4OgFGzhEEw2gCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.59.36.png"><img src="https://2.bp.blogspot.com/-XWHUszO3mxw/WuCX9g656vI/AAAAAAAAItU/DyrM8bb1848t9nO4xT8Pn4OgFGzhEEw2gCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258810.59.36.png"></a></p>
<p>上述的Controller撰寫方式，就是通常我們在Controller做的工作，驗證參數 、 依據使用者輸入的值執行對應的邏輯 、最後回傳結果。但你應該也會發現，整個Action邏輯裡面光是驗證參數就佔了大半的篇幅，這往往會讓程式碼複雜度提高，閱讀變得困難，這部分我們會在下一篇講解該如何把這類的邏輯分隔出去，讓程式碼更好維護美觀一些。另外Action其實還可以回傳很多種結果，前面範例用到了</p>
<div class="note info">
            <p>View ： 回傳頁面<br>RedirectToAction ：回傳導頁結果</p>
          </div>

<p>底層還支援了一些回傳方式，靈活應用就可以達成大部分的功能了。詳細參考：&nbsp;<a target="_blank" rel="noopener" href="https://msdn.microsoft.com/zh-tw/library/dd410269(v=vs.98).aspx">ＭＳＤＮ</a></p>
<p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-68Q1RXjX860/WuCZYQn2b7I/AAAAAAAAItk/MkjLnK3AXeIj_LtiX_SUBJRJZUMpBzghwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258811.05.55.png"><img src="https://2.bp.blogspot.com/-68Q1RXjX860/WuCZYQn2b7I/AAAAAAAAItk/MkjLnK3AXeIj_LtiX_SUBJRJZUMpBzghwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-25%2B%25E4%25B8%258B%25E5%258D%258811.05.55.png"></a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/04/25/%E9%9B%9C%E6%B9%8A%E8%A1%A8-Hash-Table/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/25/%E9%9B%9C%E6%B9%8A%E8%A1%A8-Hash-Table/" class="post-title-link" itemprop="url">雜湊表(Hash Table)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-25 14:42:00" itemprop="dateCreated datePublished" datetime="2018-04-25T14:42:00+08:00">2018-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/04/25/%E9%9B%9C%E6%B9%8A%E8%A1%A8-Hash-Table/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/04/25/雜湊表-Hash-Table/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>學生時期學資料結構跟演算法時，每次看到厚厚的課本加上一堆用C語言寫的範例，雖然都有修過，但說真的不知道它可以拿來做什麼? 直到出了社會開始寫一些專案要調教效能時，才發現原來以前學的是這麼厲害的東西阿。</p>
<p>開始前想先推薦一下這本書【**<a target="_blank" rel="noopener" href="http://www.books.com.tw/products/0010771263">演算法圖鑑：26種演算法 + 7種資料結構，人工智慧、數據分析、邏輯思考的原理和應用全圖解</a>**】，作者用簡單的圖解方式帶領讀者瞭解艱澀的資料結構與演算法的歷程，雖然要實際應用在專案中還需要一些內化，但已經比我以前的課本好多了(拭淚)，對這方面有興趣的非常推薦買這本書來看看</p>
<p><img src="https://3.bp.blogspot.com/-smnC4Uqvy2o/WuAO9eoEKeI/AAAAAAAAIpA/bCPO3w0V8foQypYlEuzEOE0Kix5ieq9owCLcBGAs/s320/getImage.jpg"><br>圖片出處:&nbsp;<a target="_blank" rel="noopener" href="http://www.books.com.tw/products/0010771263">http://www.books.com.tw/products/0010771263</a></p>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><p>公司有派送Coupon券的需求，而條件是該券不能與過往中的任何一張重複，所以在產生Coupon券代碼後，最好跟以前的做一下比對來確保沒有發生重複的情形，而Coupon券為英數字12個字元格式，區分大小寫，比對方法想過以下幾種方式</p>
<p><strong>1. 寫入時，用SQL語法的方式要求DB先搜尋確定沒有再寫</strong></p>
<ul>
<li>優點 : 寫法簡單</li>
<li>缺點 : 耗掉DB效能，當要寫入的筆數一多時，DB會出現效能瓶頸</li>
</ul>
<p><strong>2. 將全部的Coupon券撈出來後，進行比對，確定沒有再進行寫入</strong></p>
<ul>
<li>優點 : 因為是將資料撈出DB再從Application端做比對，所以對DB負擔較小</li>
<li>缺點 : 進行字串比對時該如何有效率執行是個問題，尤其是字串比對，如果處理方式不佳，也一樣會在Application端產生效能瓶頸</li>
</ul>
<p>這邊我採取<strong>方式2</strong>並搭配雜湊表來解決，而為何要用雜湊表以下慢慢說明<br>產生Coupon券的程式如下</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 隨機產生Couopn</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;number&quot;&gt;</span>幾位數<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">CreateNewCode</span>(<span class="params"><span class="built_in">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="built_in">string</span> allChar = <span class="string">&quot;0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z&quot;</span>;</span><br><span class="line"> <span class="built_in">string</span>[] allCharArray = allChar.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"> <span class="built_in">string</span> randomCode = <span class="built_in">string</span>.Empty;</span><br><span class="line"></span><br><span class="line"> Random rand = <span class="keyword">new</span> Random();</span><br><span class="line"> <span class="built_in">int</span> temp = <span class="number">-1</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; number; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span> (temp != <span class="number">-1</span>)</span><br><span class="line">   rand = <span class="keyword">new</span> Random(i * temp * Guid.NewGuid().GetHashCode());</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> t = rand.Next(<span class="number">62</span>);</span><br><span class="line">  <span class="keyword">if</span> (temp != <span class="number">-1</span> &amp;&amp; temp == t)</span><br><span class="line">   <span class="keyword">return</span> CreateNewCode(number);</span><br><span class="line"></span><br><span class="line">  temp = t;</span><br><span class="line">  randomCode += allCharArray[t];</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> randomCode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>執行方式<br><img src="https://2.bp.blogspot.com/-VCEeS9lnvOA/WuATxkpoMJI/AAAAAAAAIpQ/Gk1ddWkT2LQiXkmBFVC91MKl5bY9JeO4ACLcBGAs/s400/1524634551190.jpg"></p>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>如果你是寫C#的，那要比對是否有一樣的東西存在List中最快的方式就是用Any()這個方法，而我們知道List儲存方式實際是這樣<br><img src="https://3.bp.blogspot.com/-8zOTRs4Cc2c/WuAVJpzqr3I/AAAAAAAAIpY/cXL5qgSCJfACEtr2M1mFW0G5Y6sHYE7SQCLcBGAs/s400/4.png"></p>
<p>記憶體位置放置資料內容，而每個節點會記錄下一筆資料的記憶體位置在哪，所以List裡面的資料未必是一個相連的記憶體區段，但它只要知道開頭那筆資料，就可以依序將資料逐筆讀取出來。</p>
<p>換言之，如果要搜尋一個列表中是否有相同的資料存在，必須用線性的方式搜尋，也就是逐筆檢查，從第一筆開始每筆拿出來看看，直到比對到為止，最佳的狀況是第一筆就是你要比對的資料，最差，就是最後一筆才是你要的資料，而且搜尋的成本會隨著資料的增長而遞增。</p>
<h3 id="1萬筆資料搜尋效能"><a href="#1萬筆資料搜尋效能" class="headerlink" title="1萬筆資料搜尋效能"></a>1萬筆資料搜尋效能</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> 產生的資料筆數 = <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="comment">//準備要用來搜尋的資料</span></span><br><span class="line"> <span class="keyword">var</span> Pools = CreateSearchPool();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//透過Stopwatch來看看實際搜尋要花費的時間</span></span><br><span class="line"> Stopwatch sw = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line"></span><br><span class="line"> Random rnd = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//總共花費的時間</span></span><br><span class="line"> <span class="built_in">double</span> TotalTime = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//搜尋一百次</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="comment">//動態從產生的資料母體中抽一筆作為我們要搜尋的目標</span></span><br><span class="line">  <span class="keyword">var</span> RandomIndex = rnd.Next(<span class="number">0</span>, 產生的資料筆數 <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//取出要搜尋的字</span></span><br><span class="line">  <span class="keyword">var</span> Target = Pools[RandomIndex];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//碼表歸零</span></span><br><span class="line">  sw.Reset();</span><br><span class="line">  <span class="comment">//碼表開始計時</span></span><br><span class="line">  sw.Start();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//透過Any方式對List做搜尋</span></span><br><span class="line">  <span class="keyword">var</span> Result = Pools.Any(x=&gt; x == Target);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//搜尋結束，碼錶停止</span></span><br><span class="line">  sw.Stop();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//將時間加上這次搜尋花費的時間，為毫秒</span></span><br><span class="line">  TotalTime += sw.Elapsed.TotalMilliseconds;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//算出平均每次搜尋，耗費的秒數</span></span><br><span class="line"> (TotalTime /<span class="number">100</span>).Dump();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立要搜尋的母體</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;<span class="built_in">string</span>&gt; <span class="title">CreateSearchPool</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> List&lt;<span class="built_in">string</span>&gt;  Pool = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; 產生的資料筆數; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="comment">//動態新增Coupon資料</span></span><br><span class="line">  <span class="keyword">var</span> Code = CreateNewCode(<span class="number">12</span>);</span><br><span class="line">  <span class="comment">//丟進我們要用來搜尋Pool</span></span><br><span class="line">  Pool.Add(Code);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> Pool;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隨機產生Couopn券代碼</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">CreateNewCode</span>(<span class="params"><span class="built_in">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="built_in">string</span> allChar = <span class="string">&quot;0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z&quot;</span>;</span><br><span class="line"> <span class="built_in">string</span>[] allCharArray = allChar.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"> <span class="built_in">string</span> randomCode = <span class="built_in">string</span>.Empty;</span><br><span class="line"></span><br><span class="line"> Random rand = <span class="keyword">new</span> Random();</span><br><span class="line"> <span class="built_in">int</span> temp = <span class="number">-1</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; number; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span> (temp != <span class="number">-1</span>)</span><br><span class="line">   rand = <span class="keyword">new</span> Random(i * temp * Guid.NewGuid().GetHashCode());</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> t = rand.Next(<span class="number">62</span>);</span><br><span class="line">  <span class="keyword">if</span> (temp != <span class="number">-1</span> &amp;&amp; temp == t)</span><br><span class="line">   <span class="keyword">return</span> CreateNewCode(number);</span><br><span class="line"></span><br><span class="line">  temp = t;</span><br><span class="line">  randomCode += allCharArray[t];</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> randomCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>實際算出來的平均搜尋時間為 0.083978(毫秒)<br><img src="https://2.bp.blogspot.com/-tQqJviXLOCo/WuAYO5enERI/AAAAAAAAIpk/0phrut2lXZAeKHlxmUmaJcwRH5XKPOQ2gCLcBGAs/s320/1524634551190.jpg"></p>
<h3 id="100萬筆資料搜尋效能"><a href="#100萬筆資料搜尋效能" class="headerlink" title="100萬筆資料搜尋效能"></a>100萬筆資料搜尋效能</h3><p>將搜尋母體放大100倍，也就是從100萬筆資料中隨機抽樣搜尋100次，結果為8.540132(毫秒)<br><img src="https://4.bp.blogspot.com/-y_vAjnwVC8g/WuAY6Daco7I/AAAAAAAAIps/jBd4pstz1C4a8M-Romh7y6DLjbwxM8oQACLcBGAs/s320/1524634551190.jpg"></p>
<p><strong>可以觀察到搜尋效率隨著資料量的增長快速遞減</strong>，而一百萬筆對於Coupon券來說其實不多，如果你的會員數有一萬人，每個人發到第100張時，總共發出去的數量就達到這個等級了 ，相信很多店商平台所產出的Coupon數遠遠大於這個量。</p>
<h2 id="雜湊表"><a href="#雜湊表" class="headerlink" title="雜湊表"></a>雜湊表</h2><p>雜湊表與List的最大差異是它非線性搜尋，它將所有要放入的資料先進行雜湊的方式算出一個值後，依據算出來的值放到對應的記憶體位置去，搜尋時也是先將要搜尋的值進行雜湊運算，算出對應位置，直接取出該記憶體的資料進行比對</p>
<p><img src="https://1.bp.blogspot.com/-3NId_KHtuNQ/WuAcAKGQ_TI/AAAAAAAAIp4/Zlj2-QGfly0AVMqrN0ISR6ZmwDgLPqYlACLcBGAs/s640/5.png"></p>
<p>特點是它非線性搜尋，也就是說它不需要抓到第一筆資料後，依序依據指標，往下找下一筆資料，即便不是還是要每筆遍尋才能知道結果，雜湊表的好處就在於，你要搜尋時，就已經知道該去哪找了。</p>
<p>而可能會有一個問題，那如果經過運算後，兩筆資料要儲存的地方一樣呢?這時候就是發生所謂的<strong>碰撞</strong>，一張好的雜湊表理論上要盡量避免碰撞發生，但現實中難以避免，所以進階的用法就是將相同位置內再放入List來存入更多筆資料。<br><img src="https://4.bp.blogspot.com/-jHUfoyB0QxQ/WuAdptnHTMI/AAAAAAAAIqE/vOzIaX6O0-0A1JbkLAtF5HB28UkSbyDsQCLcBGAs/s640/5.png"></p>
<p>這邊可能會有一個疑問是，那跟我一開始用List有什麼差別 ?</p>
<p>如果我們相信資料是平均分佈，那雜湊結果理論上也會平均分佈，但就如前面提的，現實中實在難以避免碰撞的發生，所以即便真的發生碰撞，我們也能確定List中的資料絕對不會有很多筆，多到導致效能瓶頸的發生。所以雜湊表的陣列該開出幾格來就是需要經過考量的，如果你有數百萬筆的資料，只開出100格，那最平均的結果就是每一格裡面會有1萬筆的資料，這顯然不理想。</p>
<h3 id="1萬筆資料搜尋效能-1"><a href="#1萬筆資料搜尋效能-1" class="headerlink" title="1萬筆資料搜尋效能"></a>1萬筆資料搜尋效能</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> 產生的資料筆數 = <span class="number">10000</span>;</span><br><span class="line"><span class="built_in">int</span> 雜湊表格數 = <span class="number">1000</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="comment">//準備要用來搜尋的資料</span></span><br><span class="line"> <span class="keyword">var</span> Pools = CreateSearchPool();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//透過Stopwatch來看看實際搜尋要花費的時間</span></span><br><span class="line"> Stopwatch sw = <span class="keyword">new</span> System.Diagnostics.Stopwatch();<span class="comment">//引用stopwatch物件</span></span><br><span class="line"></span><br><span class="line"> Random rnd = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//總共花費的時間</span></span><br><span class="line"> <span class="built_in">double</span> TotalTime = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//搜尋一百次</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="comment">//動態從產生的資料母體中抽一筆作為我們要搜尋的目標</span></span><br><span class="line">  <span class="keyword">var</span> RandomIndex = rnd.Next(<span class="number">0</span>, 產生的資料筆數 - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//取出要搜尋的字</span></span><br><span class="line">  <span class="keyword">var</span> Target = AllCode[RandomIndex];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//碼表歸零</span></span><br><span class="line">  sw.Reset();</span><br><span class="line">  <span class="comment">//碼表開始計時</span></span><br><span class="line">  sw.Start();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//取得Hash後應該存放的位置</span></span><br><span class="line">  <span class="keyword">var</span> HashPosition = GetHashPosition(Target);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//從陣列中取出該筆資料</span></span><br><span class="line">  <span class="keyword">var</span> PositionData = Pools[HashPosition];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//如果有資料</span></span><br><span class="line">  <span class="keyword">if</span> (PositionData != <span class="literal">null</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="comment">//檢查這個List是否存在相同的Coupon代碼</span></span><br><span class="line">   <span class="keyword">var</span> Result = PositionData.Any(x =&gt; x == Target);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//碼錶停止</span></span><br><span class="line">  sw.Stop();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//將時間加上這次搜尋花費的時間，為毫秒</span></span><br><span class="line">  TotalTime += sw.Elapsed.TotalMilliseconds;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//算出平均每次搜尋，耗費的秒數</span></span><br><span class="line"> (TotalTime / <span class="number">100</span>).Dump();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;<span class="built_in">string</span>&gt; AllCode =<span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;<span class="built_in">string</span>&gt;[] <span class="title">CreateSearchPool</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> List&lt;<span class="built_in">string</span>&gt;[] SearchPool = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;[雜湊表格數];</span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; 產生的資料筆數; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">var</span> Code = CreateNewCode(<span class="number">12</span>);</span><br><span class="line">  AllCode.Add(Code);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> p = GetHashPosition(Code);</span><br><span class="line">  <span class="keyword">var</span> PositionData = SearchPool[p];</span><br><span class="line">  <span class="keyword">if</span> (PositionData == <span class="literal">null</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   PositionData = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">   SearchPool[p] = PositionData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  PositionData.Add(Code);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> SearchPool;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 隨機產生Couopn</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;number&quot;&gt;</span>幾位數<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">CreateNewCode</span>(<span class="params"><span class="built_in">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="built_in">string</span> allChar = <span class="string">&quot;0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z&quot;</span>;</span><br><span class="line"> <span class="built_in">string</span>[] allCharArray = allChar.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"> <span class="built_in">string</span> randomCode = <span class="built_in">string</span>.Empty;</span><br><span class="line"></span><br><span class="line"> Random rand = <span class="keyword">new</span> Random();</span><br><span class="line"> <span class="built_in">int</span> temp = <span class="number">-1</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; number; i++)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span> (temp != <span class="number">-1</span>)</span><br><span class="line">   rand = <span class="keyword">new</span> Random(i * temp * Guid.NewGuid().GetHashCode());</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> t = rand.Next(<span class="number">62</span>);</span><br><span class="line">  <span class="keyword">if</span> (temp != <span class="number">-1</span> &amp;&amp; temp == t)</span><br><span class="line">   <span class="keyword">return</span> CreateNewCode(number);</span><br><span class="line"></span><br><span class="line">  temp = t;</span><br><span class="line">  randomCode += allCharArray[t];</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> randomCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SHA256 sha256 = <span class="keyword">new</span> SHA256CryptoServiceProvider();</span><br><span class="line"><span class="comment">//取得Hash後應該存放的位置</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">int</span> <span class="title">GetHashPosition</span>(<span class="params"><span class="built_in">string</span> code</span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">var</span> ByteArray = sha256.ComputeHash(Encoding.Default.GetBytes(code));</span><br><span class="line"> <span class="keyword">var</span> IntResult = BitConverter.ToInt32(ByteArray, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//轉正</span></span><br><span class="line"> IntResult = Math.Abs(IntResult);</span><br><span class="line">        <span class="comment">//除格子數，餘數就是這筆資料該放的位置</span></span><br><span class="line"> <span class="keyword">return</span> IntResult % 雜湊表格數;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>實際算出來的平均搜尋時間為 0.004124(毫秒)<br><img src="https://4.bp.blogspot.com/-vJKz9RTTIrE/WuAgfayRf2I/AAAAAAAAIqY/dfiypYwPw6U3FsOpd7KSfq9PTEoP77aFQCLcBGAs/s320/1524634551190.jpg"></p>
<h3 id="100萬筆資料搜尋效能-1"><a href="#100萬筆資料搜尋效能-1" class="headerlink" title="100萬筆資料搜尋效能"></a>100萬筆資料搜尋效能</h3><p>一樣將數字放大到100萬筆，實際算出來的平均搜尋時間為 0.033612(毫秒)，可以發現即便搜尋筆數擴張了100倍，效率並沒有完全等比遞減<br><img src="https://2.bp.blogspot.com/-OnhkLzr3Sbk/WuAim-sw7YI/AAAAAAAAIqk/jjOy-f4I-24HB97unw6zo9yvrhKVxm9uwCLcBGAs/s320/1524634551190.jpg"></p>
<p>當然各種資料型態跟搜尋狀況不同，可能適用的資料結構與演算法也會略有不同要取捨，雜湊法也並非沒有缺點，例如在製作表時比較耗時，所以適合用在資料變動不大的情境，先將表做起來後放到快取去更新維護都是一些優化的方法，以上提供給大家參考。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/04/05/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%914-%E7%82%BA%E4%BD%A0%E7%9A%84Route%E5%8A%A0%E4%B8%80%E9%BB%9E%E9%99%90%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/05/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%914-%E7%82%BA%E4%BD%A0%E7%9A%84Route%E5%8A%A0%E4%B8%80%E9%BB%9E%E9%99%90%E5%88%B6/" class="post-title-link" itemprop="url">【MVC教學】4. 為你的Route加一點限制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-05 00:14:00" itemprop="dateCreated datePublished" datetime="2018-04-05T00:14:00+08:00">2018-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/04/05/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%914-%E7%82%BA%E4%BD%A0%E7%9A%84Route%E5%8A%A0%E4%B8%80%E9%BB%9E%E9%99%90%E5%88%B6/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/04/05/【MVC教學】4-為你的Route加一點限制/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>上一篇寫了Route比對的邏輯，這次來點更進階的應用，讓我們幫Route比對加上一些些限制。</p>
<p>假設今天About的頁面，他是依據網址帶入的 ID取得對應的會員資料，回傳結果，而ID必定為<strong>數字，如果不是數字就不要進到程式碼，直接擋掉該如何做？</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我們希望的網址，最後的ID一定要為數字</span></span><br><span class="line">/home/about/<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>加上Constraints限制，而限制的方法用正規表示法來表達，以上述的只能為數字為例</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-DDzFIwOxsvQ/WsTtsAb1bgI/AAAAAAAAInA/pJdFwqPGRdIZ6LKQ-EgiXc2xem8FcQ4QACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.22.03.png)](https://1.bp.blogspot.com/-DDzFIwOxsvQ/WsTtsAb1bgI/AAAAAAAAInA/pJdFwqPGRdIZ6LKQ-EgiXc2xem8FcQ4QACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.22.03.png)</div>
constraints的部分，我們把ID限制在只能出現數字，（如果對於正規表示法不熟悉的話，推薦可以翻翻這本書，就算記不起來拿來當工具書也很實用&nbsp;[<span style="color: #454545; font-family: &quot;.PingFang TC&quot;;">處理大數據的必備美工刀</span><span style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;"> - </span><span style="color: #454545; font-family: &quot;.PingFang TC&quot;;">全支援中文的正規表示法精解</span>](https://www.tenlong.com.tw/products/9789863759539)）

<p>接著執行網站試試看 /home/about/123</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-5v8kKEHK7oQ/WsTve5DgK7I/AAAAAAAAInM/qCpoatJcmjED_wL1aP5zPUEnHuiVDzA1QCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.29.45.png)](https://2.bp.blogspot.com/-5v8kKEHK7oQ/WsTve5DgK7I/AAAAAAAAInM/qCpoatJcmjED_wL1aP5zPUEnHuiVDzA1QCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.29.45.png)</div>
看起來沒問題，接著我們執行/home/about/Steven，這邊請記得把Default那組Route註解起來，如果還記得上篇Route比對方法的話，這組雖然會因為Steven不是數字而被About那組Route擋掉，但依然符合Default的萬用Route比對規則，而正確執行，為了測試請先註解掉Default那組。
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-97qSMhzIPOE/WsTwIiBOlMI/AAAAAAAAInU/Xb90Cy9gzJYsGtOuzXkPSL6bWfQszpr1ACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.32.39.png)](https://3.bp.blogspot.com/-97qSMhzIPOE/WsTwIiBOlMI/AAAAAAAAInU/Xb90Cy9gzJYsGtOuzXkPSL6bWfQszpr1ACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.32.39.png)</div>

<p>如我們預期的，因為Steven不是數字的原因而被擋掉了，Constraints算是一個可以把Route用得更靈活的技巧，雖然需要懂的正規表示法，但我覺得這兩項學習投資很划算，正規表示法到很多地方都很萬用。</p>
<h3 id="自訂更複雜的Constraints"><a href="#自訂更複雜的Constraints" class="headerlink" title="自訂更複雜的Constraints"></a>自訂更複雜的Constraints</h3><div>我們再來出個更刁的要求，假設你老闆就叫Steven，而且他不希望跟別人一樣，每個人都是打ID查資料顯示太一般，他偏偏要只有輸入Steven也要能進到About頁時該怎麼辦？</div><div>
</div><div>
</div><div>當然也可以用正規表示法硬做，但可能會讓Constraint寫得很醜難維護，所以這次改用實作IRouteConstraint的方式來完成這個需求</div><div>
</div><div>
</div><div>建立一個StevenBossConstraint的Class</div><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-lzkbxUNTjPs/WsTyHmO8DrI/AAAAAAAAInk/Z69_UKTgzw4Yiduel0QPOKVnIq9uNLP1ACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.39.46.png)](https://1.bp.blogspot.com/-lzkbxUNTjPs/WsTyHmO8DrI/AAAAAAAAInk/Z69_UKTgzw4Yiduel0QPOKVnIq9uNLP1ACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.39.46.png)</div><div>
</div>
實作以下內容
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-mCMOFMxoiQs/WsT0UDLnh5I/AAAAAAAAIn0/w7PzqK5RsyEabGIx9azbwzT2CZj6VlN6gCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.48.47.png)](https://3.bp.blogspot.com/-mCMOFMxoiQs/WsT0UDLnh5I/AAAAAAAAIn0/w7PzqK5RsyEabGIx9azbwzT2CZj6VlN6gCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.48.47.png)</div>

<p>將原本設定ID的Constrainte改成我們寫的StevenBossConstraint</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-SXNFt3bhpRE/WsT1HLb4yzI/AAAAAAAAIn8/x04sB1B-ymwBSfdvYbCOrn4EcNjTaoFAwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.51.38.png)](https://3.bp.blogspot.com/-SXNFt3bhpRE/WsT1HLb4yzI/AAAAAAAAIn8/x04sB1B-ymwBSfdvYbCOrn4EcNjTaoFAwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.51.38.png)</div>

<p>執行後就會發現，數字跟Steven都可以通過Route的檢查，但你打Tom或是Tim之類的其他非數字參數，都會被擋掉</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-QOP-fMjmh1M/WsT1zhvaGSI/AAAAAAAAIoM/8GxzEl2aKKY0V2sSKZEo9zXqNg2qI7KJQCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.56.40.png)](https://2.bp.blogspot.com/-QOP-fMjmh1M/WsT1zhvaGSI/AAAAAAAAIoM/8GxzEl2aKKY0V2sSKZEo9zXqNg2qI7KJQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.56.40.png)</div>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-dV8vMrVM9rQ/WsT1z2-D7uI/AAAAAAAAIoQ/TJAfdgiSc_cu36opnnSktdBx9eULS0tXwCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.56.29.png)](https://2.bp.blogspot.com/-dV8vMrVM9rQ/WsT1z2-D7uI/AAAAAAAAIoQ/TJAfdgiSc_cu36opnnSktdBx9eULS0tXwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.56.29.png)</div>
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-rAGzQD3L_c8/WsT1zmOtcFI/AAAAAAAAIoI/O7utdb1IfIUkMAK013X5TQwoo-QOvQ-pACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.56.47.png)](https://3.bp.blogspot.com/-rAGzQD3L_c8/WsT1zmOtcFI/AAAAAAAAIoI/O7utdb1IfIUkMAK013X5TQwoo-QOvQ-pACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-04%2B%25E4%25B8%258B%25E5%258D%258811.56.47.png)</div>

<h4 id="透過小工具來幫助偵錯Route設定"><a href="#透過小工具來幫助偵錯Route設定" class="headerlink" title="透過小工具來幫助偵錯Route設定"></a>透過小工具來幫助偵錯Route設定</h4><div>可以透過Nuget來安裝Route Debugger工具，他們告訴我們目前網頁之所以能夠顯示，是因為走了哪一條Route規則，這在初期我對這些設定還不熟悉時幫助非常的大</div><div>
</div><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-OF3Lz23taZc/WsT2n5WMicI/AAAAAAAAIoc/yvgdxPJ_Dj84sOOWiZaf5KDe4m47nuFOQCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-05%2B%25E4%25B8%258A%25E5%258D%258812.00.15.png)](https://1.bp.blogspot.com/-OF3Lz23taZc/WsT2n5WMicI/AAAAAAAAIoc/yvgdxPJ_Dj84sOOWiZaf5KDe4m47nuFOQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-05%2B%25E4%25B8%258A%25E5%258D%258812.00.15.png)</div><div>
</div><div>
</div><div>
</div><div>安裝這組套件</div><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-MY03_784a74/WsT5eh-6T7I/AAAAAAAAIoo/fgvoj60WvfARLWeyjMfRHi_9onyYPdCmACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-05%2B%25E4%25B8%258A%25E5%258D%258812.10.10.png)](https://2.bp.blogspot.com/-MY03_784a74/WsT5eh-6T7I/AAAAAAAAIoo/fgvoj60WvfARLWeyjMfRHi_9onyYPdCmACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-05%2B%25E4%25B8%258A%25E5%258D%258812.10.10.png)</div>

<p>接著重新執行網站就可在看到詳細解說</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-_GBLWNdFSoA/WsT51ZoPPkI/AAAAAAAAIos/A4wI4Ml7U9U1QjmMwGcIPe0LQCpVbra2QCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-05%2B%25E4%25B8%258A%25E5%258D%258812.13.24.png)](https://1.bp.blogspot.com/-_GBLWNdFSoA/WsT51ZoPPkI/AAAAAAAAIos/A4wI4Ml7U9U1QjmMwGcIPe0LQCpVbra2QCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-04-05%2B%25E4%25B8%258A%25E5%258D%258812.13.24.png)</div>

<p>相信剛開始要改Route的使用者來說，會是相當有幫助的工具喔！！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/03/17/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%913-Route-%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/17/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%913-Route-%E4%B8%80/" class="post-title-link" itemprop="url">【MVC教學】3. Route(一)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-17 20:54:00" itemprop="dateCreated datePublished" datetime="2018-03-17T20:54:00+08:00">2018-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/03/17/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%913-Route-%E4%B8%80/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/03/17/【MVC教學】3-Route-一/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">什麼是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>？<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>在現實生活中比較接近於郵差與地圖的關係，你將想要送的東西交給郵差,郵差依據包裹上的地址，透過地圖找到目的地然後投遞。

<p>而對應到程式中[網址]就是你包裹要送達的目的地址，Route就是[地圖]，而網址的[參數]就是你要投遞的包裹</div><div></p>
<div class="separator" style="clear: both; text-align: center;">[![](https://4.bp.blogspot.com/-v_OpLGzjdtw/Wq0MHMSi2mI/AAAAAAAAIko/7mcxcoPLkpUWExDOSn657rGCjMfUtiJSgCLcBGAs/s400/1.jpg)](https://4.bp.blogspot.com/-v_OpLGzjdtw/Wq0MHMSi2mI/AAAAAAAAIko/7mcxcoPLkpUWExDOSn657rGCjMfUtiJSgCLcBGAs/s1600/1.jpg)</div>
<div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">接著我們來看看專案內的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>在哪邊設定，又它是如何透過網址知道該把[包裹]送去哪支程式的，這邊先把我們之前的專案執行起來，並且點擊[關於]</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">
</div><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-ryN1Z3Mp3SI/Wq0MU9PT8mI/AAAAAAAAIks/ONCnMFBGRhYG0YWmLnZUV__5jGS5gpBBgCLcBGAs/s400/2.png)](https://1.bp.blogspot.com/-ryN1Z3Mp3SI/Wq0MU9PT8mI/AAAAAAAAIks/ONCnMFBGRhYG0YWmLnZUV__5jGS5gpBBgCLcBGAs/s1600/2.png)</div><div class="separator" style="clear: both; text-align: center;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">可以看到關於頁的網址為</span> /Home/About</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">
</div><div class="separator" style="clear: both; text-align: center;">[![](https://4.bp.blogspot.com/-F1fHYAInGic/Wq0MkAgp4uI/AAAAAAAAIkw/PN3nKltrc5wH8Lkb9Lk5_6flzLCy80GOACLcBGAs/s400/3.png)](https://4.bp.blogspot.com/-F1fHYAInGic/Wq0MkAgp4uI/AAAAAAAAIkw/PN3nKltrc5wH8Lkb9Lk5_6flzLCy80GOACLcBGAs/s1600/3.png)</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">接著我們在<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">HomeController</span>的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">About</span>下中斷點後再點擊一次網頁的[關於]按鈕，會發現程式停在我們下中斷點的地方了？<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>為什麼知道程式會跑到這邊呢<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> ? </span>這一切都是因為有<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>指路的關係</div></div><div>
</div><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-LFueIPKzOYI/Wq0MwArDFLI/AAAAAAAAIk4/gJdWivFruxcZoCKaGNAfYamVnM8JEO3igCLcBGAs/s400/4.png)](https://1.bp.blogspot.com/-LFueIPKzOYI/Wq0MwArDFLI/AAAAAAAAIk4/gJdWivFruxcZoCKaGNAfYamVnM8JEO3igCLcBGAs/s1600/4.png)</div><div class="separator" style="clear: both; text-align: center;">
</div><div class="separator" style="clear: both; text-align: center;">
</div>

<h3 id="RouteConfig"><a href="#RouteConfig" class="headerlink" title="RouteConfig"></a><strong>RouteConfig</strong></h3><div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>的規則是可以自己制訂的，而制定的地方就在<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">App_Start</span>資料夾底下的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">RouteConfig</span>裡面</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-empHw_-1tig/Wq0M_p2kL-I/AAAAAAAAIlA/XQjsx0UahlsjJyqijDxTtSa7hmnkJVm5ACLcBGAs/s400/5.png)](https://2.bp.blogspot.com/-empHw_-1tig/Wq0M_p2kL-I/AAAAAAAAIlA/XQjsx0UahlsjJyqijDxTtSa7hmnkJVm5ACLcBGAs/s1600/5.png)</div>
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-r4pEpAts3NA/Wq0NBNPYBKI/AAAAAAAAIlE/rUslCqFTfUEvvPRAG5cWKdDvL8S_CgGGQCLcBGAs/s400/6.png)](https://3.bp.blogspot.com/-r4pEpAts3NA/Wq0NBNPYBKI/AAAAAAAAIlE/rUslCqFTfUEvvPRAG5cWKdDvL8S_CgGGQCLcBGAs/s1600/6.png)</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">讓我們來解讀這段程式碼，首先<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">routes.MapRoute</span>就是註冊地址的方法，裡面有幾個參數分別為</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;">Name : <span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">你對於這個</span>Route<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的命名</span></div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Url : </span>網址條件，當網址符合這個條件特徵時，就會依據這個<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>的指示去找對應執行的程式碼</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;">defaults : <span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">參數的預設值</span></div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">相信光是講解參數的意義對於要理解<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>還有相當的距離，讓我們直接來實戰理解<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> /Home/About</span>這串網址如何對應到<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>的吧，剛剛有說，<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">routes.MapRoute</span>的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Url</span>參數是用來判斷網址特徵是否相符，如果相符就會被這串<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>捕捉到，但是這兩個怎麼看都不像啊</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">真實網址</span> <span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">：</span> /Home/About</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;">Route Url :&nbsp; {controller}/{action}/{id}</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">首先必須先知道一件事情，當<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route Url</span>的網址用<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">{ }</span>包起來的時候，代表他是個變數，什麼是變數？變數是一個表示值，它可以是任意的值，而<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">{}</span>裡面的字就是變數的名稱，以上述例子為例</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">controller</span>，它可以是任意的值</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">action</span>，它可以是任意得值</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>，它也可以是任意的值</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">那套入</span>/Home/About<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">會變成什麼結果？</span></div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">controller</span>，它現在的值是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Home</span></div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">action</span>，它現在的值是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">About</span></div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>，它現在沒有值</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">而</span><span style="color: #454545;">Route</span><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的制定中，</span>**<span style="color: red;">controller<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">跟</span>action</span>**<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">**<span style="color: red;">為保留字</span>**<span style="color: #454545;">，意思是告訴他要執行哪個</span></span><span style="color: #454545;">controller</span><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">跟</span><span style="color: #454545;">Action</span><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，依據這邊的規定，所以它知道要去執行</span><span style="color: #454545;">Home</span><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">這個</span><span style="color: #454545;">Controller</span><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，裡面一個叫做</span><span style="color: #454545;">About</span><span style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的</span><span style="color: #454545;">Action</span></div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-lPmkR6MJKWs/Wq0NMR-XeJI/AAAAAAAAIlM/NuECRMJtFww8ve031wVUqj-dnCa6K4FQgCLcBGAs/s400/7.png)](https://3.bp.blogspot.com/-lPmkR6MJKWs/Wq0NMR-XeJI/AAAAAAAAIlM/NuECRMJtFww8ve031wVUqj-dnCa6K4FQgCLcBGAs/s1600/7.png)</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div class="note info">
            <p>在Controller裡面寫的方法我們稱之為Action，而他通常都會回傳ActionResult</p>
          </div>
<div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-stretch: normal; line-height: normal;">再讓我們看一個例子<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>：<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>[首頁]</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">首頁的網址為</span> : http://localhost:54004/</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-l2A_55syPtg/Wq0NzWKrZFI/AAAAAAAAIlg/NYnq1QMfQBUv9_fsyYczIqUSy4BW4ZHEQCLcBGAs/s400/8.png)](https://1.bp.blogspot.com/-l2A_55syPtg/Wq0NzWKrZFI/AAAAAAAAIlg/NYnq1QMfQBUv9_fsyYczIqUSy4BW4ZHEQCLcBGAs/s1600/8.png)</div>
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div class="note info">
            <p>網址最前面這段寫著 Localhost :54004 ，Localhost為網址的Domain，54004為Port，Domain是網站的位置，例如我們在google搜尋Facebook時，會看到網址變成<a target="_blank" rel="noopener" href="https://www.google.com.tw/search?q=facebook%EF%BC%8C%E8%80%8Cwww.google.com.tw%E5%B0%B1%E6%98%AFDomain%EF%BC%8C%E7%95%B6%E8%AE%80%E5%88%B0%E9%80%99%E4%B8%B2Domain%E6%99%82%EF%BC%8C%E5%B0%B1%E6%9C%83%E9%80%8FDNS%E6%89%BE%E5%88%B0Google%E7%9A%84%E4%BC%BA%E6%9C%8D%E5%99%A8%EF%BC%8C%E7%84%B6%E5%BE%8C%E5%91%BC%E5%8F%AB%E5%AE%83%EF%BC%8C%E4%B8%A6%E4%B8%94%E8%AB%8B%E6%B1%82%E4%BB%96%E5%9F%B7%E8%A1%8C/search?q=facebook%EF%BC%8C%E9%80%99%E4%B9%9F%E6%98%AF%E7%82%BA%E4%BB%80%E9%BA%BC%E6%88%91%E5%80%91%E8%A8%8E%E8%AB%96Route%E6%99%82%E6%B2%92%E6%9C%89%E6%8A%8ADomain%E7%B4%8D%E9%80%B2%E4%BE%86%EF%BC%8CDomain%E5%8F%AA%E6%98%AF%E8%AE%93%E7%B6%B2%E8%B7%AF%E8%83%BD%E6%89%BE%E5%88%B0%E4%BD%A0%E6%9C%8D%E5%8B%99%E7%9A%84%E4%BC%BA%E6%9C%8D%E5%99%A8%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%BE%8C%E9%9D%A2%E6%89%8D%E6%98%AF%E4%BD%A0%E6%92%B0%E5%AF%AB%E7%A8%8B%E5%BC%8F%E8%A6%81%E8%99%95%E7%90%86%E7%9A%84Route%E7%B6%B2%E5%9D%80">https://www.google.com.tw/search?q=facebook，而www.google.com.tw就是Domain，當讀到這串Domain時，就會透DNS找到Google的伺服器，然後呼叫它，並且請求他執行/search?q=facebook，這也是為什麼我們討論Route時沒有把Domain納進來，Domain只是讓網路能找到你服務的伺服器位置，後面才是你撰寫程式要處理的Route網址</a></p>
          </div>
<div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">所以首頁網址等於<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> &nbsp;</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">首頁網址<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>：<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> /</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route Url :&nbsp; {controller}/{action}/{id}</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">controller</span>，它現在沒有值</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">action</span>，它現在沒有值</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>，它現在沒有值</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">什麼都沒有，那程式到底要執行哪邊？<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>這時候<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Default</span>終於派上用場了，<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Default</span>的意思就是，當沒有值時，請用我設定的值代替吧</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-TDgD-ND409Y/Wq0OX06AV7I/AAAAAAAAImc/CSNnXFgp6jkv3ajpzFLwlQuWyC8t7rBUgCEwYBhgL/s400/9.png)](https://1.bp.blogspot.com/-TDgD-ND409Y/Wq0OX06AV7I/AAAAAAAAImc/CSNnXFgp6jkv3ajpzFLwlQuWyC8t7rBUgCEwYBhgL/s1600/9.png)</div>
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">所以</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">controller<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">為空值，所以用</span>Default<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的值代替，所以它的值為</span>Home</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">action<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">為空值，所以用</span>Default<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的值代替，所以它的值為</span>Index</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">為空直，但</span>Default<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">設定它為</span>UrlParameter.Optional<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，意思是它是選擇性的，如果沒有沒關係</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">所以這個<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>設定又完美符合了，所以依據條件，我們去<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">HomeController</span>的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Index</span>下中斷點，試試看進入首頁時是不是會停在這邊</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-3I8rJaSlSzI/Wq0OT3PebrI/AAAAAAAAIlo/gtyIS1YVuD83WLbI_Fh1huvHCyqCFcwUgCEwYBhgL/s400/10.png)](https://2.bp.blogspot.com/-3I8rJaSlSzI/Wq0OT3PebrI/AAAAAAAAIlo/gtyIS1YVuD83WLbI_Fh1huvHCyqCFcwUgCEwYBhgL/s1600/10.png)</div>
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-koCX4c7IthY/Wq0OT1iZPOI/AAAAAAAAIls/8Crncjqy5b0piO1OdxXPkaPVzgxpD2pzwCEwYBhgL/s400/11.png)](https://3.bp.blogspot.com/-koCX4c7IthY/Wq0OT1iZPOI/AAAAAAAAIls/8Crncjqy5b0piO1OdxXPkaPVzgxpD2pzwCEwYBhgL/s1600/11.png)</div>

</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的確，他依據規則跑到了</span>HomeController<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的</span>Index Action<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">了。</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">那舉一反三一下，換句話說首頁網址也可以是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> /Home/Index </span>摟，試試看，你會發現它的確走到一樣的中斷點</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-PGK33fEJg-Q/Wq0OT4Pa-7I/AAAAAAAAImo/_9AR8OUt1Iga3IytGl1LuqwTxbsmNeWkwCEwYBhgL/s400/12.png)](https://2.bp.blogspot.com/-PGK33fEJg-Q/Wq0OT4Pa-7I/AAAAAAAAImo/_9AR8OUt1Iga3IytGl1LuqwTxbsmNeWkwCEwYBhgL/s1600/12.png)</div>
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">你可能會說，那這樣<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>還有什麼好學的，這個寫法幾乎萬用了啊？<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>的確在ＭＶＣ預設專案中的這個<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>設定我們通常稱它為萬用<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>，但也因為它幾乎萬用，所以不好管理，所以正常來說都還是會制定自己的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>規則，好方便管理，這個之後慢慢寫專案碰到多了會更有感觸。</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">接著我們來試著修改一下程式，讓我們的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">{id}</span>能派上用場吧！！</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">在剛剛的案例中，因為<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>設定是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Optional</span>所以都沒派上用場，來試試看他怎麼用吧，首先我們先在<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">HomeController</span>的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">About Action</span>中加入參數<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>，並且把回傳的訊息改成<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Your id is </span>(你帶進來的值)</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-FLI7MLnnMfw/Wq0OUuGGE3I/AAAAAAAAImk/nXWFNqHfTN8NUtq0rDJzxIB1jou_4DAdwCEwYBhgL/s400/13.png)](https://3.bp.blogspot.com/-FLI7MLnnMfw/Wq0OUuGGE3I/AAAAAAAAImk/nXWFNqHfTN8NUtq0rDJzxIB1jou_4DAdwCEwYBhgL/s1600/13.png)</div>
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;Helvetica Neue&quot;; font-size: 12px; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">接著我們重新執行一次程式，並且把網址改成<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">/Home/About/Steven</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-Zks5ZE30New/Wq0OUxoT8HI/AAAAAAAAIms/WxfowIPPItUnVcXErJ1H2FQPfHTWr58RgCEwYBhgL/s400/14.png)](https://2.bp.blogspot.com/-Zks5ZE30New/Wq0OUxoT8HI/AAAAAAAAIms/WxfowIPPItUnVcXErJ1H2FQPfHTWr58RgCEwYBhgL/s1600/14.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">再練習一次<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>比對</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">controller</span>，它現在的值是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Home</span></div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">action</span>，它現在的值是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">About</span></div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們有一個變數叫做<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>，它現在的值是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Steven</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">讓接著看中斷點，把滑鼠移到<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>那的參數會看到，<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Id</span>依據我們下的網址，以<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Steven</span>帶進來了</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-h6ZLvBxZDRE/Wq0OVDhncjI/AAAAAAAAImo/IL83Kj55bx4EQb6yZg5uz7jkxi9Poyq1QCEwYBhgL/s400/15.png)](https://3.bp.blogspot.com/-h6ZLvBxZDRE/Wq0OVDhncjI/AAAAAAAAImo/IL83Kj55bx4EQb6yZg5uz7jkxi9Poyq1QCEwYBhgL/s1600/15.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">接著看網頁呈現的成果</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-4scpot89dZU/Wq0OVopL--I/AAAAAAAAImg/sdGZ1pxWLIMBO-ftiDpWhDA3l2f1tz7XwCEwYBhgL/s400/16.png)](https://3.bp.blogspot.com/-4scpot89dZU/Wq0OVopL--I/AAAAAAAAImg/sdGZ1pxWLIMBO-ftiDpWhDA3l2f1tz7XwCEwYBhgL/s1600/16.png)</div>
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal; margin-bottom: 2px;">

<h3 id="練習制定一個屬於我們的Route"><a href="#練習制定一個屬於我們的Route" class="headerlink" title="練習制定一個屬於我們的Route"></a>練習制定一個屬於我們的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><strong>Route</strong></span></h3></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">看了兩個範例，我們也來制定一個<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>規則給自己用吧，而且我們不要用變數的方式。</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-cOBHu8_QRGw/Wq0OV84UZ2I/AAAAAAAAImo/GhiHQFpeFGkvHHlIju0NPcUDtmSpF9OmQCEwYBhgL/s400/17.png)](https://3.bp.blogspot.com/-cOBHu8_QRGw/Wq0OV84UZ2I/AAAAAAAAImo/GhiHQFpeFGkvHHlIju0NPcUDtmSpF9OmQCEwYBhgL/s1600/17.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">我們希望有個網址為<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">/tellMe/whoAreYou/{name}</span>，且<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">name</span>跟之前的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">id</span>一樣是個變數，可以由你自己打喜歡的文字來決定，寫完後來試試看這個<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">route</span>可不可行</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-DviuNDcFiHg/Wq0OWIgZMfI/AAAAAAAAImk/uDokBOMNij0mSGMLcLZsxjp63J7qOdKDwCEwYBhgL/s400/18.png)](https://1.bp.blogspot.com/-DviuNDcFiHg/Wq0OWIgZMfI/AAAAAAAAImk/uDokBOMNij0mSGMLcLZsxjp63J7qOdKDwCEwYBhgL/s1600/18.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">結果竟然錯了，來看看少了什麼</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">網址</span> <span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">：</span> /tellMe/whoAreYou/steven</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route Url :&nbsp; /tellMe/whoAreYou/{name}</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">比對</span>tellMe<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">比對</span>whoAreYou<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">比對<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Name</span>這個變數，現在的值為<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Steven</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">然後呢？<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>有沒有發現即便這邊都比對正確，符合<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">route</span>規則，但我們沒告訴他<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Controller</span>是誰，<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Action</span>是誰，程式當然不知道該去執行誰，所以再來改一下，因為我們還沒學到如何建立<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Controller</span>跟<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Action</span>，所以先用現成的，<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>導到<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">homeController</span>的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Contact</span>吧</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-qH5gM8_e5zA/Wq0OWghkjZI/AAAAAAAAImo/3gENq49UAPUaqw-ybuBoWEy2tlBNdeM6wCEwYBhgL/s400/19.png)](https://1.bp.blogspot.com/-qH5gM8_e5zA/Wq0OWghkjZI/AAAAAAAAImo/3gENq49UAPUaqw-ybuBoWEy2tlBNdeM6wCEwYBhgL/s1600/19.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-dSlvDEn3NLw/Wq0OW9IOoBI/AAAAAAAAIms/uPwgRJ_nwzkB6qAltJkNWfcSZGUu6h44wCEwYBhgL/s400/20.png)](https://2.bp.blogspot.com/-dSlvDEn3NLw/Wq0OW9IOoBI/AAAAAAAAIms/uPwgRJ_nwzkB6qAltJkNWfcSZGUu6h44wCEwYBhgL/s1600/20.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">讓我們再試試看剛剛的網址</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-Pm-1-hAQ2Xc/Wq0OXEQrCpI/AAAAAAAAImo/7jBfE4xT3w8Y4QRu_iDmqrxtYcEk-8AgACEwYBhgL/s400/21.png)](https://1.bp.blogspot.com/-Pm-1-hAQ2Xc/Wq0OXEQrCpI/AAAAAAAAImo/7jBfE4xT3w8Y4QRu_iDmqrxtYcEk-8AgACEwYBhgL/s1600/21.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">這次不會壞掉了，且正確的導到</span>HomeController<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的</span>Contact Action<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">去，接著試試不帶</span>{Name}<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">會怎麼樣</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-qulCDWyyTIs/Wq0OXeD8fFI/AAAAAAAAIms/3CVn_ntnPms8AvxipLFd34dYGInhrSN_wCEwYBhgL/s400/22.png)](https://2.bp.blogspot.com/-qulCDWyyTIs/Wq0OXeD8fFI/AAAAAAAAIms/3CVn_ntnPms8AvxipLFd34dYGInhrSN_wCEwYBhgL/s1600/22.png)</div>
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">變成找不到資源，為什麼？因為我們的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Name</span>沒有設定為<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">UrlParameter.Optional</span>，所以是必帶的參數，這邊要特別注意！！！<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"> </span>之前教很多新人<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>時很多人都卡在這邊</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal; margin-bottom: 2px;"><span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">**Route**</span>比對時必須完全符合才會被捕捉到</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-stretch: normal; line-height: normal;"><div style="font-family: &quot;.pingfang tc&quot;;">所以回頭審視我們的<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>註冊目前有兩個規則</div><div style="font-family: &quot;.pingfang tc&quot;;"><span style="font-family: &quot;helvetica neue&quot;;">
</span></div><span style="font-family: &quot;pingfang tc&quot;;">1.&nbsp;</span><span style="font-family: &quot;helvetica neue&quot;;">tellMe/whoAreYou/{name}</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">2\. {controller}/{action}/{id}</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">而我們帶的網址為</span> /tellMe/whoAreYou <span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，比對的規則將會是</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">

</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">由上到下，所以先比對了</span> 1\. **tellMe/whoAreYou/{name}** <span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的規則</span>&nbsp;</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">tellMe<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">whoAreYou<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>要求要有<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Name</span>，且不是<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Optional</span>，所以必帶，”不符合”</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">
</span><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">這段</span>Route<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">會被跳過，執行比對</span>2\. **{controller}/{action}/{id}&nbsp;**<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的規則</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Controller<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">為</span>tellMe<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Action<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">為</span>WhoAreYou<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Id<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">為空值，因為為</span>Optional<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，符合</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">

</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">所以實際程式去找的是</span>TellMeController<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">裡面的</span>WhoAreYou<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">這個</span>Action<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">，因為找不到這支程式所以顯示錯誤，而不是去執行規則</span>1.<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的</span> HomeController<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">的</span>Contact<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">這個</span>Action<span style="font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">。</span></div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal; min-height: 14px;">
</div><div style="color: #454545; font-family: &quot;.pingfang tc&quot;; font-stretch: normal; line-height: normal;">這是新手常常會犯的觀念錯誤，所以特別舉這個例子希望能夠較清楚的比較跟釐清，而<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">Route</span>因為還有很多種設定，避免一次太多造成混亂，所以先到這邊。試著將上述的觀念釐清，對於之後撰寫<span style="font-family: &quot;helvetica neue&quot;; font-stretch: normal; line-height: normal;">MVC Route</span>時會很有幫助</div></div><div>
</div><div>
</div>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/02/22/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%912-%E4%BB%80%E9%BA%BC%E6%98%AFMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/22/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%912-%E4%BB%80%E9%BA%BC%E6%98%AFMVC/" class="post-title-link" itemprop="url">【MVC教學】2. 什麼是MVC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-22 22:31:00" itemprop="dateCreated datePublished" datetime="2018-02-22T22:31:00+08:00">2018-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/02/22/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%912-%E4%BB%80%E9%BA%BC%E6%98%AFMVC/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/02/22/【MVC教學】2-什麼是MVC/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>如果你本來跟我一樣是寫Dot Net Web的工程師,那你應該是從Web Form開始的,第一次接觸MVC時,應該心中都會浮現「什麼是MVC ?」 </p>
<p>其實<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/MVC">Wiki</a>已經解釋得很清楚了,就不重複贅述這些定義,有興趣可以自己看看,而我比較想提的是這跟原本開發Web Form,或是說你是寫別語言但沒使用MVC這個架構時的差別。 </p>
<p>還記得以前在接手前輩專案時,因為每個人開發習慣不盡相同,對於各種用途的類別可能都有一套自己的歸類方式,所以剛開始總是需要花大把時間在熟悉前輩定義的架構, 如果專案一多,常常切換專案時都會有一種混亂感。  </p>
<p>如果遇到是初心工程師,可能會有那種一個Function幾百行的,基本上要改個東西都要找很久之外,還很怕改錯,而這些不僅僅造成維護的成本增加之外,還讓接手別人專案時總是滿滿恨意！！ </p>
<p>而MVC這個架構就是在解決這個問題,他將系統分成三大部分 Model 、View、 Controller, 而這三大部分分別管理著 </p>
<p>Model : 資料的管理(例如與資料庫的溝通) , 演算法邏輯(商業邏輯) , 物件結構定義 </p>
<p>View : 呈現給使用者看、操作的介面 </p>
<div>Controller :  依據傳入的資料該怎麼運作、程式流程的控制、該回傳給使用者什麼資料等

</div><div>
</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://3.bp.blogspot.com/-ByxeEs_OPjo/Wo7SEU86Q2I/AAAAAAAAIkM/ILz4hUYI59gdspAfW_MxUekeTfa2ZaWCQCEwYBhgL/s640/2.jpg)](https://3.bp.blogspot.com/-ByxeEs_OPjo/Wo7SEU86Q2I/AAAAAAAAIkM/ILz4hUYI59gdspAfW_MxUekeTfa2ZaWCQCEwYBhgL/s1600/2.jpg)</td></tr><tr><td class="tr-caption" style="text-align: center;"><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;">出處 https://helloacm.com/model-view-controller-explained-in-c/</div></td></tr></tbody></table><div>
</div>

<h3 id="優點ㄧ-：-讓習慣代替配置"><a href="#優點ㄧ-：-讓習慣代替配置" class="headerlink" title="優點ㄧ ： 讓習慣代替配置"></a>優點ㄧ ： 讓習慣代替配置</h3><p><span style="font-weight: normal;">因為大家對於MVC有相同的認識,且Dot Net MVC更把這些定義落實到專案上,在不改動底層運作的情況下,屬於Controller的Class就該放到Controllers的資料夾、屬於頁面呈現的就放到Views資料夾,且預設也有一個Models的資料夾給你放Model,有了這些規範後,讓習慣來代替配置,你接手別人的MVC專案後, 所有人的開發方式基本上都會依照這個規範去落實,降低維護的成本。</span><br><span style="font-weight: normal;"><br></span></p>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://4.bp.blogspot.com/-4aTMTqC7vZE/Wo7SSOsXq7I/AAAAAAAAIkY/aQAQWR1nxkATcDPTD2xx4nwxLUOqQYI-gCEwYBhgL/s400/1.png)](https://4.bp.blogspot.com/-4aTMTqC7vZE/Wo7SSOsXq7I/AAAAAAAAIkY/aQAQWR1nxkATcDPTD2xx4nwxLUOqQYI-gCEwYBhgL/s1600/1.png)</td></tr><tr><td class="tr-caption" style="text-align: center;"><div style="color: #454545; font-family: &quot;.PingFang TC&quot;; font-size: 12px; font-stretch: normal; line-height: normal;">Dot Net MVC預設新建專案就會有這些資料夾</div></td></tr></tbody></table><div>
</div>

<h3 id="優點二-：-關注點分離"><a href="#優點二-：-關注點分離" class="headerlink" title="優點二 ： 關注點分離"></a>優點二 ： 關注點分離</h3><p>如果今天是在處理使用者操作介面,那就專心的套版,將Controller傳回來的資料看要怎麼擺放,又如果在處理資料流傳入的參數驗證,那就在Controller處理完,不用去管會不會影響到View的呈現, 如果是跟資料庫的溝通,就在Model裡將它實作好,不需擔心是否參數有空值或Null, 因為那些該是在Controller處理掉的。 </p>
<p>相較於以前的Web Form開發方式,因為UserControl介於頁面跟Code Behind的事件之間,常常耦合度太強,一改兩邊都會動到，需要較嚴謹的開發規範才能避免耦合問題,而且我記憶最深的就是UserControl間的生命週期,那個互相攪在一起要改還真要命… </p>
<div class="note info">
            <p>Web Form有其快速且便利性,以上並非說Dot Net MVC能完全取代Web Form,<br>更想表達的是,這是當我從開發Web Form兩年然後跳到MVC目前5年多，<br>它所帶給我的感受與改變,希望透過這些講述能更清楚MVC是否是你該投入資源學習的架構</p>
          </div>


<h3 id="優點三-：-前端更自由"><a href="#優點三-：-前端更自由" class="headerlink" title="優點三 ： 前端更自由"></a>優點三 ： 前端更自由</h3><p>在Dot Net MVC中,不再有User Control這類的元件存在,所以前端會更加的自由,無論是在JS或是CSS的運用上，再也不會有元件Render時幫你加上一堆多餘的Tag或是Class。</p>
<div class="note info">
            <p>目前經手過的一些專案,有些都已經徹底前後端分離,<br>後端只有負責處理好API或是ViewModel(傳給View的資料通常定義出來的Class都會叫ViewModel,這之後會再提到)，<br>吐一個空的頁面載入指定JS,剩下就讓前端去處理介面,彼此分工更精細,互相耦合的程度也降低許多。</p>
          </div>


<p>這篇花比較多篇幅在解說ＭVC是什麼,又Dot Net MVC在開發上能帶來什麼改變跟好處, 下一篇預計就要開始講Router 與 Controller之間的關係。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://toyo0103.github.io/2018/02/21/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%911-%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E3%80%81%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8-Visual-Studio/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Toyo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式隨筆">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/21/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%911-%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E3%80%81%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8-Visual-Studio/" class="post-title-link" itemprop="url">【MVC教學】1. 工欲善其事、必先利其器 Visual Studio</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-21 16:06:00" itemprop="dateCreated datePublished" datetime="2018-02-21T16:06:00+08:00">2018-02-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-09 21:36:17" itemprop="dateModified" datetime="2022-08-09T21:36:17+08:00">2022-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%B8%E7%BF%92MVC/" itemprop="url" rel="index"><span itemprop="name">學習MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/02/21/%E3%80%90MVC%E6%95%99%E5%AD%B8%E3%80%911-%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B%E3%80%81%E5%BF%85%E5%85%88%E5%88%A9%E5%85%B6%E5%99%A8-Visual-Studio/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/02/21/【MVC教學】1-工欲善其事、必先利其器-Visual-Studio/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>年前朋友討論是否寫Dot Net Mvc的簡單教學文章,害我過年都在思考該怎麼寫這東西…可惡(果然是個心裡容不下待辦事項的人啊)。</p>
<p>認真的想了後覺得這真是個非常難的主題,一來是網路上已經有很多資源,我也不是什麼大神,很怕誤人子弟。二來雖然以前曾經幫忙教育訓練過新進同事,但面對面的溝通且依照每個人程度不同給予討論,跟用文章教會一個不知道對象是誰,且博大精深的框架與語言,這個差距實在太大,所以最後只好一直將目標縮小再縮小,希望這系列文如果看完時能達到以下目標我就滿足了</p>
<p>**目標對象 **</p>
<div class="note info">
            <p>1.你有一點程式語言的底子,但沒接觸過Dot Net MVC<br>2.寫過Dot Net MVC,但還不是很熟悉它怎麼應用</p>
          </div>

<p><strong>希望達成目標</strong></p>
<div class="note info">
            <p>1.能夠比較清楚的理解Dot Net MVC怎麼運作<br>2.知道了一些小東西,或許能改善目前你開發上困擾</p>
          </div>


<p>那就先從工具開始吧</p>
<div class="note info">
            <p>Visual Studio Community : <a target="_blank" rel="noopener" href="https://www.visualstudio.com/zh-hant/vs/community/">微軟官網載點</a></p>
          </div>
<p>開發Dot Net的工程師,應該9成9的人都是使用Visual Studio,它不僅號稱地表最強編輯器,微軟更佛心的提供了免費版本給大家使用,否則最基礎的一套Visual Studio的價格應該也會讓初學者非常卻步。</p>
<p>當然既然是免費版本,功能上一定會有些陽春,但對於只是入門學習Dot Net而言已經是相當強大的工具了。</p>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://4.bp.blogspot.com/-AThY6IIeOMU/Wozqfrbkj8I/AAAAAAAAIhM/unPhEYOMwi4GocjIIbH3sQLsG6zFLwLXgCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258A%25E5%258D%258811.41.26.png)](https://4.bp.blogspot.com/-AThY6IIeOMU/Wozqfrbkj8I/AAAAAAAAIhM/unPhEYOMwi4GocjIIbH3sQLsG6zFLwLXgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258A%25E5%258D%258811.41.26.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">功能比較(來源: [https://www.visualstudio.com/zh-hant/vs/compare/](https://www.visualstudio.com/zh-hant/vs/compare/))</td></tr></tbody></table>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://2.bp.blogspot.com/-IAZ842DU7bE/WozrAMFvS5I/AAAAAAAAIhU/hXxvWOr48VIim3dJ2gxOVdllEfdLsvspgCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258A%25E5%258D%258811.43.35.png)](https://2.bp.blogspot.com/-IAZ842DU7bE/WozrAMFvS5I/AAAAAAAAIhU/hXxvWOr48VIim3dJ2gxOVdllEfdLsvspgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258A%25E5%258D%258811.43.35.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">價格表(來源:[https://www.visualstudio.com/zh-hant/vs/pricing/](https://www.visualstudio.com/zh-hant/vs/pricing/))</td></tr></tbody></table>

<p>下載完之後將它安裝起來</p>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://4.bp.blogspot.com/-l_GogekWtuo/Wo0NeymgUGI/AAAAAAAAIhk/a9KRtEucnA8ZAofXpTfM1WKc0Cn1-VSeACLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25882.10.47.png)](https://4.bp.blogspot.com/-l_GogekWtuo/Wo0NeymgUGI/AAAAAAAAIhk/a9KRtEucnA8ZAofXpTfM1WKc0Cn1-VSeACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25882.10.47.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">選擇Community安裝</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://4.bp.blogspot.com/-VxH0BFcP1N4/Wo0OAeM_n8I/AAAAAAAAIhs/XbpBzTLtFQsEQwdPNDVF0V1-yghRDhHMgCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25882.13.01.png)](https://4.bp.blogspot.com/-VxH0BFcP1N4/Wo0OAeM_n8I/AAAAAAAAIhs/XbpBzTLtFQsEQwdPNDVF0V1-yghRDhHMgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25882.13.01.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">勾選ASP.NET與網頁程式開發</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://1.bp.blogspot.com/-YT3wMLUPuxQ/Wo0OS6i817I/AAAAAAAAIhw/cJGnL6jonT0Kf9XxbKzB9k_5qT6vdB16wCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25882.14.13.png)](https://1.bp.blogspot.com/-YT3wMLUPuxQ/Wo0OS6i817I/AAAAAAAAIhw/cJGnL6jonT0Kf9XxbKzB9k_5qT6vdB16wCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25882.14.13.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">等它安裝完</td></tr></tbody></table>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://2.bp.blogspot.com/-mb-CXRobkYs/Wo0ZC8U4VJI/AAAAAAAAIiE/hVP-yUd9UtMsSVpt3iVTjyRgksp825iLwCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.00.10.png)](https://2.bp.blogspot.com/-mb-CXRobkYs/Wo0ZC8U4VJI/AAAAAAAAIiE/hVP-yUd9UtMsSVpt3iVTjyRgksp825iLwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.00.10.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">安裝完之後打開應該會看到這個畫面</td></tr></tbody></table>
<div class="note info">
            <p>因為寫程式大部分時間都需要一直長盯著螢幕,所以螢幕底色如果是淺色系通常到下午我眼睛都會很酸,所以Visual Studio也很貼心了提供修改視窗色系的功能,例如我截圖就是深色系。<br>調整方式如下<br>工具 &gt; 選項 &gt; 色彩佈景主題<br><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-ExYk1nrzalI/Wo0aNHm1jLI/AAAAAAAAIiM/xA5vmqHWUkgo1DYB_4zz9nbfb1oKw3vyQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.03.31.png"><img src="https://1.bp.blogspot.com/-ExYk1nrzalI/Wo0aNHm1jLI/AAAAAAAAIiM/xA5vmqHWUkgo1DYB_4zz9nbfb1oKw3vyQCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.03.31.png"></a></p>
          </div>
**
****
****建立第一個Web專案**
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://3.bp.blogspot.com/-8NkEiv-Pdy0/Wo0atMIeTBI/AAAAAAAAIiY/Xqtt1Nt4vdYMutyRHnF6SK0ywGJw6IBVwCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.07.17.png)](https://3.bp.blogspot.com/-8NkEiv-Pdy0/Wo0atMIeTBI/AAAAAAAAIiY/Xqtt1Nt4vdYMutyRHnF6SK0ywGJw6IBVwCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.07.17.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">檔案 &gt; 新增 &gt; 專案</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://3.bp.blogspot.com/-52w4Z2LQrMo/Wo0bFfQ42ZI/AAAAAAAAIic/W7IdEeXSIqIh3rG2CmSN4slAT6Qu1qkzgCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.08.51.png)](https://3.bp.blogspot.com/-52w4Z2LQrMo/Wo0bFfQ42ZI/AAAAAAAAIic/W7IdEeXSIqIh3rG2CmSN4slAT6Qu1qkzgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.08.51.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">選擇Web &gt; Web應用程式(.NET Framework) 。
專案名稱與放的位置依照自己喜好即可</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;">[![](https://3.bp.blogspot.com/-sG9_1osHZzM/Wo0bo1ny1kI/AAAAAAAAIio/mRKCMTpCjp461LAbSFCK6EzS02y1Z02KQCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.11.14.png)](https://3.bp.blogspot.com/-sG9_1osHZzM/Wo0bo1ny1kI/AAAAAAAAIio/mRKCMTpCjp461LAbSFCK6EzS02y1Z02KQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.11.14.png)</td></tr><tr><td class="tr-caption" style="text-align: center;">選擇MVC</td></tr></tbody></table>
建立完成之後應該可以看到這個畫面
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/-bgNV43jpPbY/Wo0cBzZrZPI/AAAAAAAAIis/U152KITJzwkkk3aMigyzBB7fAyCPS0pIACLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.12.56.png)](https://3.bp.blogspot.com/-bgNV43jpPbY/Wo0cBzZrZPI/AAAAAAAAIis/U152KITJzwkkk3aMigyzBB7fAyCPS0pIACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.12.56.png)</div><div class="note info">
            <p>如果看不到方案總管,可以透過<strong>檢視</strong>&gt; <strong>方案總管</strong>來打開</p>
          </div>


<p>右邊就是我們寫程式要放的地方,之後介紹Dot Net MVC時會慢慢帶到,但今天還不需要寫到程式,先直接將程式執行起來,看看預設建立好的網站是長什麼樣</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-rsiatvazfV0/Wo0dW96VDgI/AAAAAAAAIi0/62hUceI6RWI5zmuuQrkAE9MP5q0ZXAjaQCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.17.44.png)](https://2.bp.blogspot.com/-rsiatvazfV0/Wo0dW96VDgI/AAAAAAAAIi0/62hUceI6RWI5zmuuQrkAE9MP5q0ZXAjaQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.17.44.png)</div>
因為這是網站程式, 點選執行旁邊的向下箭頭後,可以依照個人喜好選擇習慣用的瀏覽器來瀏覽,我個人是習慣用Google Chrome,所以以下用Chrome做示範,選好後按下綠色的箭頭執行。

<p>執行起來之後應該可以看到一個很專業的診斷工具面板,分別顯示目前佔了CPU幾%,用了多少記憶體…等等</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-02yTU2prJZY/Wo0ekE8DgvI/AAAAAAAAIi8/8BiY3LezXhUhV7QMK8XeKO9oy3RG4jKOQCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.22.30.png)](https://2.bp.blogspot.com/-02yTU2prJZY/Wo0ekE8DgvI/AAAAAAAAIi8/8BiY3LezXhUhV7QMK8XeKO9oy3RG4jKOQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.22.30.png)</div>

<p>而這時候你選擇的瀏覽器應該也會開啟，然後看到目前網站的成果</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-Xw28Lnnj1vI/Wo0euDl5nmI/AAAAAAAAIjA/hj1eQKYS0jcS8goj3FDv0yngDCHDYPmVACLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.24.20.png)](https://2.bp.blogspot.com/-Xw28Lnnj1vI/Wo0euDl5nmI/AAAAAAAAIjA/hj1eQKYS0jcS8goj3FDv0yngDCHDYPmVACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.24.20.png)</div>

<p>可以隨意的點擊網站按鈕逛逛玩玩後,現在來簡單講一下該如何追蹤偵錯</p>
<div class="note info">
            <p>偵錯是門大學問,常常我們寫的程式編譯時都沒有錯誤,但執行結果卻不如我們預期那般時,一步一步偵錯就會是我們發現問題的好朋友</p>
          </div>

<p>我們以<strong>關於這個按鈕</strong>為例,究竟點擊<strong>關於</strong>這個按鈕時,程式是如何執行,讓我們可以看到畫面的</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://3.bp.blogspot.com/--aluBIC6nMg/Wo0gH9fbBYI/AAAAAAAAIjQ/BaKOSBTJacIOl9_W7YAz8lqi-9Fx5C0FQCLcBGAs/s640/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.29.58.png)](https://3.bp.blogspot.com/--aluBIC6nMg/Wo0gH9fbBYI/AAAAAAAAIjQ/BaKOSBTJacIOl9_W7YAz8lqi-9Fx5C0FQCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.29.58.png)</div>

<p>因為我們還不知道目前整個程式的運作原理,所以依照下面的指示這樣做</p>
<ol>
<li><p> 找到HomeController,並且打開它</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://4.bp.blogspot.com/-kCJKeJELsx0/Wo0gxIiQthI/AAAAAAAAIjY/FPc1xN8m0oQzv5tfWhG8hf649M2gp4jUACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.31.50.png)](https://4.bp.blogspot.com/-kCJKeJELsx0/Wo0gxIiQthI/AAAAAAAAIjY/FPc1xN8m0oQzv5tfWhG8hf649M2gp4jUACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.31.50.png)</div></li>
<li><p> 找到第18行的地方,點擊那行的最左邊邊框,會產生一個紅色的原點,我們稱之為中斷點</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://2.bp.blogspot.com/-LIvuofL8J2g/Wo0ha-LzXzI/AAAAAAAAIjg/GrPyIZE-hss6nVqf2b6CgYKIhaXTjpfNgCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.34.22.png)](https://2.bp.blogspot.com/-LIvuofL8J2g/Wo0ha-LzXzI/AAAAAAAAIjg/GrPyIZE-hss6nVqf2b6CgYKIhaXTjpfNgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.34.22.png)</div><div class="note info">
            <p>中斷點的意思就是,當程式執行到這行時會停下來讓你知道,並且等待你的指示</p>
          </div></li>
<li><p> 接著再回去剛剛的網頁點擊<strong>關於,<strong>你會發現</strong>,視窗會跳到你剛剛下得中斷點位置,而網頁會卡住,並沒有顯示關於的頁面</strong><div class="separator" style="clear: both; text-align: center;"><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-_VDwlMMcZM0/Wo0iMV7i_mI/AAAAAAAAIjo/8yZiG4s8Kb0bXtwGlMl4UaLUxau9yZ5rACLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.39.13.png"><img src="https://3.bp.blogspot.com/-_VDwlMMcZM0/Wo0iMV7i_mI/AAAAAAAAIjo/8yZiG4s8Kb0bXtwGlMl4UaLUxau9yZ5rACLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.39.13.png"></a></div><br>那是因為程式還沒執行完,所以還沒辦法顯示頁面資訊4.  按下<strong>F11</strong>,每按一次<strong>F11</strong>,你會看到程式往下走一行,藉此來觀察程式如何運行,並且是否符合我們預期的結果</p>
<div class="separator" style="clear: both; text-align: center;">[![](https://4.bp.blogspot.com/-2hTcGcR7bAg/Wo0mas9EleI/AAAAAAAAIj0/H7T3H2WKSO0yF_lGqHIcrR-CxhuraR1egCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.56.54.png)](https://4.bp.blogspot.com/-2hTcGcR7bAg/Wo0mas9EleI/AAAAAAAAIj0/H7T3H2WKSO0yF_lGqHIcrR-CxhuraR1egCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25883.56.54.png)</div></li>
<li><p> 當然,我們不必每次進入中斷點後都一步一步將它執行完,如果已經找到哪邊有問題,只要再按下繼續,程式就會自動往下跑,直到碰到下一個中斷點為止 <div class="separator" style="clear: both; text-align: center;"><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-R2SEzOTjLeU/Wo0nRTaBCsI/AAAAAAAAIj8/Sx_eFGxFUgo0TNDMGsWEcVYutD1U9pYSgCLcBGAs/s1600/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25884.00.22.png"><img src="https://3.bp.blogspot.com/-R2SEzOTjLeU/Wo0nRTaBCsI/AAAAAAAAIj8/Sx_eFGxFUgo0TNDMGsWEcVYutD1U9pYSgCLcBGAs/s400/%25E8%259E%25A2%25E5%25B9%2595%25E5%25BF%25AB%25E7%2585%25A7%2B2018-02-21%2B%25E4%25B8%258B%25E5%258D%25884.00.22.png"></a></div><br>當然以上所提的,都是非常非常基礎的Visual Studio（之後文章都簡稱為VS）操作,跟日常比較會運用到的情境,VS之所以被人稱為地表最強編輯器,想當然耳不可能只有這樣而已,但這都是要慢慢開發中去體會跟累積的。相信如果真的用久了,開始使用擴充輔助套件之類的,就會知道它的強大之處。</p>
</li>
</ol>
<p>下一篇來提何謂MVC，知道後應就能理解為何會知道<strong>關於</strong>這個按鈕點擊後,會停在我們今天下的中斷點了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Toyo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">203</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">75</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Toyo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://toyo0103.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
